module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(97895),g=a.i(83103),h=a.i(53250),i=a.i(50944),j=a.i(38867);async function k(a){if(!a||""===a)return 0;try{let b=new j.ethers.JsonRpcProvider(g.CONTRACTS.fuji.rpc),c=new j.ethers.Contract(g.USDC_ADDRESS,g.USDC_ABI,b),d=await c.balanceOf(a);return Number(d)/1e6}catch{return 0}}async function l(a,b){let c=g.CONTRACTS[a];if(!c||!b||"pending"===b)return{count:0,avg:0};try{let a=new j.ethers.JsonRpcProvider(c.rpc),d=new j.ethers.Contract(c.reputationRegistry,g.REPUTATION_REGISTRY_ABI,a),e=await d.getClients(b);if(0===e.length)return{count:0,avg:0};let[f,h,i]=await d.getSummary(b,e,"",""),k=Number(f),l=k>0?Number(h)/Math.pow(10,Number(i)):0;return{count:k,avg:l}}catch{return{count:0,avg:0}}}async function m(a,b){let c=g.CONTRACTS[a];if(!c||!b||"pending"===b)return[];try{let a=new j.ethers.JsonRpcProvider(c.rpc),d=new j.ethers.Contract(c.reputationRegistry,g.REPUTATION_REGISTRY_ABI,a),e=await d.getClients(b),f=[];for(let a of e){let c=Number(await d.getLastIndex(b,a));for(let e=1;e<=c;e++)try{let[c,,g,h,i]=await d.readFeedback(b,a,e);i||f.push({clientAddress:a,index:e,value:Number(c),tag1:g,tag2:h})}catch{}}return f}catch{return[]}}var n=a.i(85085);function o({opacity:a=20}){let c=`border-foreground/${a}`;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:`absolute top-2 left-2 w-3 h-3 border-t border-l ${c}`}),(0,b.jsx)("div",{className:`absolute top-2 right-2 w-3 h-3 border-t border-r ${c}`}),(0,b.jsx)("div",{className:`absolute bottom-2 left-2 w-3 h-3 border-b border-l ${c}`}),(0,b.jsx)("div",{className:`absolute bottom-2 right-2 w-3 h-3 border-b border-r ${c}`})]})}function p(a){return`${a.slice(0,6)}...${a.slice(-4)}`}function q(a){return a>=80?`\u2713 VERIFIED ${a}`:a>=60?`VERIFIED ${a}`:a>=40?`PARTIAL ${a}`:a>=20?`LOW ${a}`:`RISK ${a}`}let r={MINIMAL:"border-green-500/60 text-green-500 bg-green-500/5",LOW:"border-cyan-500/60 text-cyan-500 bg-cyan-500/5",MEDIUM:"border-yellow-500/60 text-yellow-500 bg-yellow-500/5",HIGH:"border-red-400/60 text-red-400 bg-red-400/5",CRITICAL:"border-red-600/60 text-red-600 bg-red-600/10"},s={registration:"text-system-green border-system-green/40",voting:"text-info-blue border-info-blue/40",battle:"text-warning-amber border-warning-amber/40",judging:"text-purple-400 border-purple-400/40",completed:"text-muted-foreground border-border"};function t(){let{walletAddress:a,isConnecting:e,connect:i,signedFetch:j}=(0,n.useWallet)(),[q,r]=(0,c.useState)([]),[t,B]=(0,c.useState)([]),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)({}),[I,J]=(0,c.useState)({}),[K,L]=(0,c.useState)({}),[M,N]=(0,c.useState)({}),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!0),[S,T]=(0,c.useState)(!0),[U,V]=(0,c.useState)(!0),[W,X]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!a)return;let b=a.toLowerCase();(0,h.apiListAgents)().then(a=>{r(function(a){let b=new Map;for(let c of a){let a=c.name.toLowerCase();b.has(a)||b.set(a,c)}return Array.from(b.values())}((a.agents||[]).filter(a=>a.ownerAddress?.toLowerCase()===b)))}).catch(()=>{}).finally(()=>R(!1)),Promise.all([(0,h.apiListEvents)().catch(()=>({events:[]})),(0,h.apiGetLeaderboard)().catch(()=>({leaderboard:[]}))]).then(([a,b])=>{B(a.events||[]),D(b.leaderboard||[])}).finally(()=>T(!1)),(0,h.apiGetMyHires)(a).then(a=>F(a.hires||[])).catch(()=>{}).finally(()=>V(!1))},[a]),(0,c.useEffect)(()=>{0===q.length||(X(!0),(async()=>{let a={},b={},c={};await Promise.allSettled(q.map(async d=>{let e=`${d.network}:${d.agentId}`;d.agentWalletAddress&&(a[e]=await k(d.agentWalletAddress)),b[e]=await l(d.network,d.agentId);try{let a=await (0,h.apiGetVerification)(d.network,d.agentId);c[e]=a&&a.riskTier?a:null}catch{c[e]=null}})),H(a),J(b),L(c),X(!1)})())},[q]);let Y=(0,c.useCallback)(async a=>{let b=`${a.network}:${a.agentId}`;if(O===b)return void P(null);if(P(b),!M[b]){let c=await m(a.network,a.agentId);N(a=>({...a,[b]:c}))}},[O,M]),Z=Object.values(G).reduce((a,b)=>a+b,0),$=Object.values(I).filter(a=>a.count>0),_=$.length>0?$.reduce((a,b)=>a+b.avg,0)/$.length:0,aa=new Set(q.map(a=>`${a.network}:${a.agentId}`)),ab=C.filter(a=>aa.has(`${a.network}:${a.agentId}`));ab.reduce((a,b)=>a+b.wins,0),ab.reduce((a,b)=>a+b.battles,0);let ac=t.filter(b=>b.participants?.some(b=>b.ownerAddress?.toLowerCase()===a?.toLowerCase())),ad=ac.reduce((b,c)=>c.results?.distributions?b+c.results.distributions.filter(b=>b.address?.toLowerCase()===a?.toLowerCase()&&"success"===b.status).reduce((a,b)=>a+(b.amount||0),0):b,0);return a?(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,b.jsxs)("div",{className:"w-full max-w-6xl",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-8",children:[(0,b.jsx)("h1",{className:"font-mono text-3xl md:text-4xl font-bold tracking-tight uppercase text-foreground",children:"DASHBOARD"}),(0,b.jsx)("p",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mt-2",children:p(a)})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.05},children:[(0,b.jsx)(u,{label:"Portfolio Overview"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:[(0,b.jsx)(v,{label:"My Agents",value:Q?"...":String(q.length),loading:Q}),(0,b.jsx)(v,{label:"Total Earned",value:W?"...":`$${Z.toFixed(2)}`,subtext:"USDC",color:"text-system-green",loading:W}),(0,b.jsx)(v,{label:"Avg Reputation",value:W?"...":_>0?`${_.toFixed(1)}`:"N/A",subtext:_>0?"/ 5.0":"",loading:W}),(0,b.jsx)(v,{label:"Verified",value:W?"...":`${Object.values(K).filter(Boolean).length} / ${q.length}`,subtext:"agents verified",loading:W})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,b.jsx)(u,{label:"My Agents",count:q.length}),Q?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10",children:Array.from({length:3}).map((a,c)=>(0,b.jsx)(A,{},c))}):0===q.length?(0,b.jsx)("div",{className:"border border-border p-8 text-center mb-10",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground/60",children:"No agents registered yet. Deploy your first agent to get started."})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10",children:q.map(a=>{let c=`${a.network}:${a.agentId}`;return(0,b.jsx)(x,{agent:a,balance:G[c],reputation:I[c],verification:K[c],feedbackList:M[c],isExpanded:O===c,loadingBalance:W,onToggle:()=>Y(a),onVerified:a=>L(b=>({...b,[c]:a})),signedFetch:j},c)})})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.15},children:[(0,b.jsx)(u,{label:"Earnings & Payments"}),(0,b.jsxs)("div",{className:"border border-border p-5 relative mb-10",children:[(0,b.jsx)(o,{}),W||Q?(0,b.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,b.jsx)("div",{className:"h-8 w-32 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-full bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-3/4 bg-muted-foreground/10 rounded"})]}):0===q.length?(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/60 uppercase tracking-widest",children:"No agents to show earnings for"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Total Balance"}),(0,b.jsxs)("span",{className:"font-mono text-3xl font-bold text-system-green",children:["$",Z.toFixed(2)]}),(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/60 ml-2",children:"USDC"})]}),(0,b.jsx)("div",{className:"space-y-2 mb-5",children:q.map(a=>{let c=`${a.network}:${a.agentId}`,d=G[c]||0;return(0,b.jsx)(w,{name:a.name,balance:d,total:Z},c)})}),ad>0&&(0,b.jsxs)("div",{className:"border-t border-border pt-3 mb-4",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Arena Prize Money Earned"}),(0,b.jsxs)("span",{className:"font-mono text-lg font-bold text-warning-amber",children:["$",ad.toFixed(2)," USDC"]})]}),(0,b.jsx)(z,{agents:q,balances:G,walletAddress:a,onBalanceUpdate:(a,b)=>H(c=>({...c,[a]:b}))})]})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,b.jsx)(u,{label:"Reputation & Feedback"}),(0,b.jsxs)("div",{className:"border border-border p-5 relative mb-10",children:[(0,b.jsx)(o,{}),W||Q?(0,b.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,b.jsx)("div",{className:"h-6 w-24 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-full bg-muted-foreground/10 rounded"})]}):0===$.length?(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/60 uppercase tracking-widest",children:"No feedback received yet"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Total Feedbacks"}),(0,b.jsx)("span",{className:"font-mono text-2xl font-bold text-foreground",children:$.reduce((a,b)=>a+b.count,0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Average Score"}),(0,b.jsxs)("span",{className:"font-mono text-2xl font-bold text-foreground",children:[_.toFixed(1),(0,b.jsx)("span",{className:"text-sm text-muted-foreground/40",children:" / 5"})]})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:q.map(a=>{let c=`${a.network}:${a.agentId}`,d=I[c];return d&&0!==d.count?(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border/40 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-foreground",children:a.name}),(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/50 border border-border px-1.5 py-0.5",children:g.CONTRACTS[a.network]?.name||a.network})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"font-mono text-xs text-muted-foreground",children:[d.count," review",1!==d.count?"s":""]}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:[d.avg.toFixed(1),"/5"]})]})]},c):null})})]})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.25},children:[(0,b.jsx)(u,{label:"Arena Performance"}),(0,b.jsxs)("div",{className:"border border-border p-5 relative mb-10",children:[(0,b.jsx)(o,{}),S?(0,b.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,b.jsx)("div",{className:"h-6 w-32 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-full bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-3/4 bg-muted-foreground/10 rounded"})]}):0===ac.length&&0===ab.length?(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/60 uppercase tracking-widest",children:"No arena participation yet"}):(0,b.jsxs)(b.Fragment,{children:[ab.length>0&&(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3",children:"ELO Rankings"}),(0,b.jsx)("div",{className:"space-y-2",children:ab.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border/40 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:["#",a.rank]}),(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-foreground",children:a.name})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"font-mono text-xs text-info-blue font-bold",children:[a.elo," ELO"]}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-system-green",children:[a.wins,"W"]}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-error-red",children:[a.battles-a.wins,"L"]}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground",children:[a.winRate,"%"]})]})]},`${a.network}:${a.agentId}`))})]}),ac.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3",children:"Event History"}),(0,b.jsx)("div",{className:"space-y-2",children:ac.slice(0,10).map(c=>{let d=c.participants?.find(b=>b.ownerAddress?.toLowerCase()===a?.toLowerCase()),e=d?`${d.network}:${d.agentId}`:"",g=e&&c.scores?.[e]?c.scores[e]:null,h=c.results?.rankings?.find(a=>a.agentKey===e);return(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border/40 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-wider px-1.5 py-0.5 border shrink-0",s[c.status]||s.completed),children:c.status}),(0,b.jsx)("span",{className:"font-mono text-xs text-foreground truncate",children:c.title})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 shrink-0",children:[d&&(0,b.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground",children:d.name}),g&&(0,b.jsxs)("span",{className:"font-mono text-xs text-info-blue",children:[g.avgScore?.toFixed(1)," pts"]}),h&&(0,b.jsxs)("span",{className:(0,f.cn)("font-mono text-xs font-bold",1===h.rank?"text-warning-amber":"text-muted-foreground"),children:["#",h.rank]})]})]},c.id)})})]})]})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,b.jsx)(u,{label:"Agents I've Hired"}),(0,b.jsx)("div",{className:"mb-10",children:U?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((a,c)=>(0,b.jsx)(A,{},c))}):0===E.length?(0,b.jsxs)("div",{className:"border border-border p-8 text-center",children:[(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground/60",children:"No hire history found"}),(0,b.jsx)("p",{className:"font-mono text-[10px] text-muted-foreground/40 mt-2",children:"Hire an agent to see your history here"})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map((a,c)=>(0,b.jsx)(y,{hire:a},`hired-${a.hireId||c}`))})})]})]})})}):(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-4",children:(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},className:"border border-border p-8 relative text-center max-w-md",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:"Wallet Required"}),(0,b.jsx)("p",{className:"font-mono text-xs text-muted-foreground leading-relaxed mb-6",children:"Connect your wallet to view your agents, earnings, reputation, and arena performance."}),(0,b.jsx)("button",{onClick:i,disabled:e,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 transition-opacity disabled:opacity-30",children:e?"CONNECTING...":"CONNECT WALLET"})]})})})}function u({label:a,count:c}){return(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("h2",{className:"font-mono text-sm font-bold uppercase tracking-widest text-foreground",children:a}),void 0!==c&&(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground/50 uppercase tracking-widest",children:["(",c,")"]}),(0,b.jsx)("div",{className:"flex-1 h-[1px] bg-border"})]})}function v({label:a,value:c,subtext:d,color:e,loading:g}){return(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:a}),g?(0,b.jsx)("div",{className:"h-8 w-20 bg-muted-foreground/10 animate-pulse rounded"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-2xl md:text-3xl font-bold block",e||"text-foreground"),children:c}),d&&(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 mt-1 block",children:d})]})]})}function w({name:a,balance:c,total:d}){let e=d>0?c/d*100:0;return(0,b.jsxs)("div",{className:"flex items-center gap-3 py-1.5",children:[(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-foreground w-28 truncate",children:a}),(0,b.jsx)("div",{className:"flex-1 h-2 bg-muted-foreground/10 relative overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-system-green transition-all duration-700",style:{width:`${Math.max(e,1)}%`}})}),(0,b.jsxs)("span",{className:"font-mono text-xs text-foreground w-24 text-right",children:["$",c.toFixed(2)]})]})}function x({agent:a,balance:i,reputation:j,verification:k,feedbackList:l,isExpanded:m,loadingBalance:n,onToggle:s,onVerified:t,signedFetch:u}){let v=g.CONTRACTS[a.network]?.name||a.network,w="active"===a.status,x=Array.isArray(a.skills)?a.skills:[],y=parseFloat(a.hirePrice||"0"),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null);async function D(){A(!0),C(null);try{let b=await (0,h.apiVerifyAgent)(a.network,a.agentId,u);t(b)}catch(a){C(a instanceof Error?a.message:String(a))}finally{A(!1)}}return(0,b.jsxs)("div",{className:(0,f.cn)("border p-5 relative transition-colors",m?"border-foreground/30 col-span-1 md:col-span-2 lg:col-span-3":"border-border hover:border-foreground/20"),children:[(0,b.jsx)(o,{}),(0,b.jsxs)("button",{type:"button",onClick:s,className:"w-full text-left cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsx)("span",{className:(0,f.cn)("h-2 w-2 rounded-full shrink-0",w?"bg-system-green":"bg-error-red")}),(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground truncate",children:a.name}),a.agentId&&"pending"!==a.agentId&&(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground/60 shrink-0",children:["#",a.agentId]}),k&&(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[8px] uppercase tracking-wider px-1.5 py-0.5 border shrink-0",r[k.riskTier]||"border-border text-muted-foreground"),children:q(k.overallScore)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border px-1.5 py-0.5",children:v}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-wider",y>0?"text-system-green":"text-muted-foreground/40"),children:y>0?`$${y.toFixed(2)} USDC`:"FREE"}),(0,b.jsx)("span",{className:"flex-1"}),n?(0,b.jsx)("span",{className:"h-4 w-16 bg-muted-foreground/10 animate-pulse rounded"}):void 0!==i?(0,b.jsxs)("span",{className:"font-mono text-[10px] font-bold text-system-green",children:["$",i.toFixed(2)]}):null]}),!m&&a.description&&(0,b.jsx)("p",{className:"font-mono text-[11px] text-muted-foreground leading-relaxed line-clamp-2 mb-3",children:a.description}),!m&&x.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[x.slice(0,3).map(a=>(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/60 border border-border/60 px-1.5 py-0.5",children:a},a)),x.length>3&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40",children:["+",x.length-3]})]})]}),(0,b.jsx)(e.AnimatePresence,{children:m&&(0,b.jsx)(d.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"overflow-hidden",children:(0,b.jsxs)("div",{className:"border-t border-border mt-4 pt-4 space-y-4",children:[a.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Description"}),(0,b.jsx)("p",{className:"font-mono text-[11px] text-muted-foreground leading-relaxed",children:a.description})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.mcpEndpoint&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"MCP Endpoint"}),(0,b.jsx)("span",{className:"font-mono text-[11px] text-foreground break-all",children:a.mcpEndpoint})]}),a.a2aEndpoint&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"A2A Endpoint"}),(0,b.jsx)("span",{className:"font-mono text-[11px] text-foreground break-all",children:a.a2aEndpoint})]}),a.agentWalletAddress&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Agent Wallet"}),(0,b.jsx)("span",{className:"font-mono text-[11px] text-foreground",children:a.agentWalletAddress})]}),a.registrationTx&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Registration Tx"}),(0,b.jsx)("span",{className:"font-mono text-[11px] text-foreground",children:p(a.registrationTx)})]})]}),x.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:"Skills"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:x.map(a=>(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/60 border border-border/60 px-1.5 py-0.5",children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60",children:"ERC-8126 Verification"}),(0,b.jsx)("button",{onClick:D,disabled:z||!a.agentId||"pending"===a.agentId,className:"font-mono text-[10px] uppercase tracking-widest border border-border px-3 py-1.5 hover:border-foreground/30 hover:text-foreground transition-colors text-muted-foreground disabled:opacity-30",children:z?"Verifying...":k?"Re-verify":"Verify Now"})]}),k?(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-sm font-bold px-3 py-1 border",r[k.riskTier]||"border-border text-muted-foreground"),children:q(k.overallScore)}),(0,b.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground/60",children:k.verifiedAt?new Date(k.verifiedAt).toLocaleDateString():""})]}):(0,b.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground/40",children:"Not yet verified"}),B&&(0,b.jsx)("div",{className:"mt-2 border border-red-500/40 bg-red-500/5 px-3 py-1.5",children:(0,b.jsx)("span",{className:"font-mono text-[10px] text-red-500",children:B})})]}),j&&j.count>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:"Feedback"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,b.jsxs)("span",{className:"font-mono text-xs text-foreground",children:[j.count," review",1!==j.count?"s":""]}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:[j.avg.toFixed(1)," / 5"]})]}),l&&l.length>0&&(0,b.jsx)("div",{className:"space-y-2",children:l.slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-1.5 border-b border-border/30 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground",children:p(a.clientAddress)}),a.tag1&&(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/60 border border-border/40 px-1 py-0.5",children:a.tag1}),a.tag2&&(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/60 border border-border/40 px-1 py-0.5",children:a.tag2})]}),(0,b.jsxs)("span",{className:(0,f.cn)("font-mono text-xs font-bold",a.value>=4?"text-system-green":a.value>=2?"text-warning-amber":"text-error-red"),children:[a.value,"/5"]})]},c))}),void 0===l&&(0,b.jsx)("div",{className:"h-3 w-32 bg-muted-foreground/10 animate-pulse rounded"})]})]})})})]})}function y({hire:a}){let c=(0,i.useRouter)(),d=g.CONTRACTS[a.network]?.name||a.network,e=a.agent?.name||`Agent #${a.agentId}`,h=Number(a.callsUsed)||0,j=Number(a.callsTotal)||1,k=Math.min(100,h/j*100),l=parseFloat(a.pricePaid||"0"),m="active"===a.status,n="expired"===a.status,p="exhausted"===a.status,q=a.expiresAt?new Date(a.expiresAt).toLocaleDateString():"",r=m?"ACTIVE":n?"EXPIRED":p?"EXHAUSTED":a.status?.toUpperCase()||"";return(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground truncate",children:e}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground/60 shrink-0",children:["#",a.agentId]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border px-1.5 py-0.5",children:d}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-wider px-1.5 py-0.5 border",m?"text-system-green border-system-green/40":p?"text-warning-amber border-warning-amber/40":"text-error-red border-error-red/40"),children:r}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-info-blue",children:a.plan})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:[h," / ",j," calls"]}),(0,b.jsxs)("span",{className:(0,f.cn)("font-mono text-[9px]",k>90?"text-error-red":k>70?"text-warning-amber":"text-system-green"),children:[k.toFixed(0),"%"]})]}),(0,b.jsx)("div",{className:"w-full h-1.5 bg-muted-foreground/10 overflow-hidden",children:(0,b.jsx)("div",{className:(0,f.cn)("h-full transition-all",k>90?"bg-error-red":k>70?"bg-warning-amber":"bg-system-green"),style:{width:`${k}%`}})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40",children:["Paid $",l.toFixed(2)," USDC"]}),q&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40",children:["Expires ",q]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-border/40",children:[m&&(0,b.jsx)("button",{onClick:()=>c.push(`/workspace?network=${a.network}&agentId=${a.agentId}&hireId=${a.hireId}`),className:"flex-1 font-mono text-[10px] uppercase tracking-widest py-1.5 border border-system-green/40 text-system-green hover:bg-system-green/5 transition-colors text-center",children:"OPEN WORKSPACE"}),(n||p)&&(0,b.jsx)("button",{onClick:()=>c.push(`/hire?network=${a.network}&agentId=${a.agentId}`),className:"flex-1 font-mono text-[10px] uppercase tracking-widest py-1.5 border border-warning-amber/40 text-warning-amber hover:bg-warning-amber/5 transition-colors text-center",children:"RENEW"})]})]})}function z({agents:a,balances:d,walletAddress:e,onBalanceUpdate:f}){let{signer:i}=(0,n.useWallet)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(""),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),s=a.filter(a=>(d[`${a.network}:${a.agentId}`]||0)>0&&a.agentWalletAddress);async function t(a){let b=`${a.network}:${a.agentId}`,c=d[b]||0,j=parseFloat(l)||c;if(j<=0||j>c)return void r("Invalid amount");p("Sign the withdrawal request..."),r(null);try{if(!i)throw Error("Wallet not connected");let d=`Withdraw ${j} USDC from agent ${a.agentId} to ${e}`,l=await i.signMessage(d);p("Submitting withdrawal...");let n=await (0,h.apiWithdraw)({agentId:a.agentId,network:"fuji",toAddress:e,amount:j.toString(),ownerAddress:e,usdcAddress:g.USDC_ADDRESS,message:d,signature:l});if(n.circleTxId){p("Waiting for Circle confirmation...");let a=!1;for(let b=0;b<30;b++){await new Promise(a=>setTimeout(a,3e3));try{let b=await (0,h.apiWithdrawStatus)(n.circleTxId);if("CONFIRMED"===b.status){p(`Withdraw successful!${b.txHash?` TX: ${b.txHash.slice(0,10)}...`:""}`),a=!0;break}if("FAILED"===b.status||"DENIED"===b.status||"CANCELLED"===b.status)throw Error(`Transaction ${b.status.toLowerCase()}`)}catch{}}a||p("Withdrawal submitted â€” check Circle dashboard for confirmation.")}else p("Withdrawal submitted!");f(b,Math.max(0,c-j)),k(null),m(""),setTimeout(()=>p(null),5e3)}catch(a){r(a instanceof Error?a.message:String(a)),p(null)}}return(0,b.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3",children:"Withdraw"}),0===s.length?(0,b.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground/40",children:"No agents with balance to withdraw"}):(0,b.jsx)("div",{className:"space-y-2",children:s.map(a=>{let c=`${a.network}:${a.agentId}`,f=d[c]||0,g=j===c;return(0,b.jsxs)("div",{className:"border border-border/60 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-foreground",children:a.name}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-system-green",children:["$",f.toFixed(2)]})]}),(0,b.jsx)("button",{onClick:()=>{k(g?null:c),m(f.toString()),r(null)},className:"font-mono text-[10px] uppercase tracking-widest px-3 py-1 border border-border hover:border-foreground/30 text-muted-foreground hover:text-foreground transition-colors",children:g?"CANCEL":"WITHDRAW"})]}),g&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-border/40 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",value:l,onChange:a=>m(a.target.value),placeholder:"Amount",step:"0.01",max:f,className:"flex-1 bg-transparent border border-border px-3 py-2 font-mono text-xs text-foreground placeholder:text-muted-foreground/30 focus:outline-none focus:border-foreground/40"}),(0,b.jsx)("button",{onClick:()=>m(f.toString()),className:"font-mono text-[9px] uppercase tracking-wider px-2 py-2 border border-border text-muted-foreground hover:text-foreground",children:"MAX"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["To: ",e.slice(0,6),"...",e.slice(-4)]})}),(0,b.jsx)("button",{onClick:()=>t(a),className:"w-full font-mono text-[10px] uppercase tracking-widest py-2 bg-foreground text-background hover:opacity-90 transition-opacity",children:"CONFIRM WITHDRAW"})]})]},c)})}),o&&(0,b.jsx)("div",{className:"mt-3 border border-system-green/30 bg-system-green/5 px-3 py-2",children:(0,b.jsx)("span",{className:"font-mono text-[10px] text-system-green",children:o})}),q&&(0,b.jsx)("div",{className:"mt-3 border border-error-red/30 bg-error-red/5 px-3 py-2",children:(0,b.jsx)("span",{className:"font-mono text-[10px] text-error-red",children:q})})]})}function A(){return(0,b.jsxs)("div",{className:"border border-border p-5 relative animate-pulse",children:[(0,b.jsx)(o,{opacity:10}),(0,b.jsx)("div",{className:"h-4 w-2/3 bg-muted-foreground/10 rounded mb-3"}),(0,b.jsx)("div",{className:"h-3 w-1/3 bg-muted-foreground/10 rounded mb-4"}),(0,b.jsx)("div",{className:"h-3 w-full bg-muted-foreground/10 rounded mb-2"}),(0,b.jsx)("div",{className:"h-3 w-4/5 bg-muted-foreground/10 rounded mb-4"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"h-5 w-16 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-5 w-16 bg-muted-foreground/10 rounded"})]})]})}a.s(["default",()=>t],20731)}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map