module.exports=[84712,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(97895),g=a.i(38867),h=a.i(83103),i=a.i(53250),j=a.i(43335),k=a.i(85085);let l=[{key:"all",label:"ALL"},...Object.entries(h.CONTRACTS).map(([a,b])=>({key:a,label:b.name}))];function m(){let[a,g]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[m,o]=(0,c.useState)(null),[q,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(1);(0,c.useEffect)(()=>{(0,i.apiListAgents)().then(a=>g(a.agents||[])).catch(a=>o(a.message)).finally(()=>k(!1))},[]);let x="all"===q?a:a.filter(a=>a.network===q),y=Math.max(1,Math.ceil(x.length/18)),z=x.slice((v-1)*18,18*v),A=(0,c.useCallback)(()=>u(null),[]);return(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"font-mono text-3xl md:text-4xl font-bold tracking-tight uppercase text-foreground",children:"AGENTS"}),(0,b.jsx)("p",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mt-2",children:"Deployed on 8004agent.network"})]}),!t&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:l.map(a=>(0,b.jsx)("button",{onClick:()=>{s(a.key),u(null),w(1)},className:(0,f.cn)("font-mono text-[10px] uppercase tracking-wider px-3 py-1.5 border transition-colors",q===a.key?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:a.label},a.key))}),!j&&!m&&!t&&(0,b.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60",children:[x.length," agent",1!==x.length?"s":"","all"!==q?` on ${h.CONTRACTS[q]?.name||q}`:""]}),y>1&&(0,b.jsxs)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/40",children:["Page ",v,"/",y]})]}),(0,b.jsx)(e.AnimatePresence,{mode:"wait",children:j?(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)(n,{},c))},"loading"):m?(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border border-error-red/40 bg-error-red/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:m})},"error"):t?(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.2},children:(0,b.jsx)(r,{agent:t,onBack:A})},"detail"):0===x.length?(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border border-border p-8 text-center",children:(0,b.jsxs)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground/60",children:["No agents found","all"!==q?` on ${h.CONTRACTS[q]?.name||q}`:""]})},"empty"):(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col gap-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map((a,c)=>(0,b.jsx)(p,{agent:a,onClick:()=>u(a)},`${a.network}-${a.agentId}-${c}`))}),y>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-2",children:[(0,b.jsx)("button",{onClick:()=>w(a=>Math.max(1,a-1)),disabled:1===v,className:"font-mono text-[10px] uppercase tracking-widest px-3 py-1.5 border border-border text-muted-foreground hover:text-foreground hover:border-foreground/30 transition-colors disabled:opacity-30 disabled:pointer-events-none",children:"← Prev"}),Array.from({length:y},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>w(a),className:(0,f.cn)("font-mono text-[10px] uppercase tracking-widest w-8 h-8 border transition-colors",a===v?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:a},a)),(0,b.jsx)("button",{onClick:()=>w(a=>Math.min(y,a+1)),disabled:v===y,className:"font-mono text-[10px] uppercase tracking-widest px-3 py-1.5 border border-border text-muted-foreground hover:text-foreground hover:border-foreground/30 transition-colors disabled:opacity-30 disabled:pointer-events-none",children:"Next →"})]})]},`grid-${v}`)})]})})})}function n(){return(0,b.jsxs)("div",{className:"border border-border p-5 relative animate-pulse",children:[(0,b.jsx)(o,{opacity:10}),(0,b.jsx)("div",{className:"h-4 w-2/3 bg-muted-foreground/10 rounded mb-3"}),(0,b.jsx)("div",{className:"h-3 w-1/3 bg-muted-foreground/10 rounded mb-4"}),(0,b.jsx)("div",{className:"h-3 w-full bg-muted-foreground/10 rounded mb-2"}),(0,b.jsx)("div",{className:"h-3 w-4/5 bg-muted-foreground/10 rounded mb-4"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"h-5 w-16 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-5 w-16 bg-muted-foreground/10 rounded"})]})]})}function o({opacity:a=20}){let c=`border-foreground/${a}`;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:`absolute top-2 left-2 w-3 h-3 border-t border-l ${c}`}),(0,b.jsx)("div",{className:`absolute top-2 right-2 w-3 h-3 border-t border-r ${c}`}),(0,b.jsx)("div",{className:`absolute bottom-2 left-2 w-3 h-3 border-b border-l ${c}`}),(0,b.jsx)("div",{className:`absolute bottom-2 right-2 w-3 h-3 border-b border-r ${c}`})]})}function p({agent:a,onClick:c}){let d=h.CONTRACTS[a.network]?.name||a.network,e="active"===a.status,g=Array.isArray(a.skills)?a.skills:[],i=parseFloat(a.hirePrice||"0"),j=a.registeredAt?new Date(a.registeredAt).toLocaleDateString():"";return(0,b.jsxs)("button",{type:"button",onClick:c,className:"border border-border p-5 relative text-left cursor-pointer hover:border-foreground/30 transition-colors group w-full",children:[(0,b.jsx)(o,{}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsx)("span",{className:(0,f.cn)("h-2 w-2 rounded-full shrink-0",e?"bg-system-green":"bg-error-red")}),(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground truncate",children:a.name}),a.agentId&&"pending"!==a.agentId&&(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground/60 shrink-0",children:["#",a.agentId]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border px-1.5 py-0.5",children:d}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-wider",i>0?"text-system-green":"text-muted-foreground/40"),children:i>0?`$${i.toFixed(2)} USDC`:"FREE"})]}),a.description&&(0,b.jsx)("p",{className:"font-mono text-[11px] text-muted-foreground leading-relaxed line-clamp-2 mb-3",children:a.description}),g.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[g.slice(0,3).map(a=>(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/60 border border-border/60 px-1.5 py-0.5",children:a},a)),g.length>3&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40",children:["+",g.length-3]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[a.ownerAddress&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40 truncate",children:[a.ownerAddress.slice(0,6),"...",a.ownerAddress.slice(-4)]}),j&&(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/40 shrink-0",children:j})]})]})}function q({label:a,value:c,children:d}){return(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground/60 w-24 shrink-0 pt-0.5",children:a}),d||(0,b.jsx)("span",{className:"text-xs text-foreground break-all",children:c})]})}function r({agent:a,onBack:c}){let d=h.CONTRACTS[a.network],e=d?.name||a.network,g=d?.blockExplorer||"",i="active"===a.status,j=a.registeredAt?new Date(a.registeredAt).toLocaleString():"";return(0,b.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,b.jsx)("button",{onClick:c,className:"font-mono text-xs uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors self-start",children:"← Back to agents"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:(0,f.cn)("h-3 w-3 rounded-full",i?"bg-system-green":"bg-error-red")}),(0,b.jsx)("h2",{className:"font-mono text-2xl md:text-3xl font-bold tracking-tight uppercase text-foreground",children:a.name}),a.agentId&&"pending"!==a.agentId&&(0,b.jsxs)("span",{className:"font-mono text-sm text-muted-foreground/60",children:["#",a.agentId]})]}),(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsxs)("div",{className:"space-y-2 text-sm font-mono",children:[(0,b.jsx)(q,{label:"NAME",value:a.name}),(0,b.jsx)(q,{label:"URL",children:(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-info-blue hover:underline break-all text-xs",children:a.url})}),(0,b.jsx)(q,{label:"DESCRIPTION",value:a.description}),(0,b.jsx)(q,{label:"AGENT ID",value:a.agentId||"Pending"}),(0,b.jsx)(q,{label:"NETWORK",value:e}),(0,b.jsx)(q,{label:"STATUS",children:(0,b.jsx)("span",{className:(0,f.cn)("text-xs",i?"text-system-green":"text-error-red"),children:a.status?.toUpperCase()||"UNKNOWN"})}),(0,b.jsx)(q,{label:"OWNER",children:(0,b.jsx)("span",{className:"text-xs text-foreground break-all",children:a.ownerAddress||"—"})}),(0,b.jsx)(q,{label:"VERSION",value:a.version||"—"}),a.author&&(0,b.jsx)(q,{label:"AUTHOR",value:a.author}),(0,b.jsx)(q,{label:"LICENSE",value:a.license||"—"}),a.registrationTx&&(0,b.jsx)(q,{label:"REG TX",children:(0,b.jsx)("a",{href:`${g}/tx/${a.registrationTx}`,target:"_blank",rel:"noopener noreferrer",className:"text-info-blue hover:underline break-all text-xs",children:a.registrationTx})}),j&&(0,b.jsx)(q,{label:"REGISTERED",value:j})]})]}),(a.mcpEndpoint||a.a2aEndpoint)&&(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3",children:"Protocol Endpoints"}),(0,b.jsxs)("div",{className:"space-y-2 font-mono",children:[a.mcpEndpoint&&(0,b.jsx)(q,{label:"MCP",children:(0,b.jsx)("a",{href:a.mcpEndpoint,target:"_blank",rel:"noopener noreferrer",className:"text-info-blue hover:underline break-all text-xs",children:a.mcpEndpoint})}),a.a2aEndpoint&&(0,b.jsx)(q,{label:"A2A",children:(0,b.jsx)("a",{href:a.a2aEndpoint,target:"_blank",rel:"noopener noreferrer",className:"text-info-blue hover:underline break-all text-xs",children:a.a2aEndpoint})})]})]}),(0,b.jsx)(s,{agent:a})]})}function s({agent:a}){let{walletAddress:d,signer:e}=(0,k.useWallet)(),i=h.CONTRACTS[a.network],[l,m]=(0,c.useState)([]),[n,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(5),[y,z]=(0,c.useState)(""),A=(0,c.useRef)(!1);async function B(){try{let b=new g.ethers.JsonRpcProvider(i.rpc),c=new g.ethers.Contract(i.reputationRegistry,h.REPUTATION_REGISTRY_ABI,b),d=await c.getClients(a.agentId);if(0===d.length){p({count:0,avg:0}),r(!1);return}try{let[b,e,f]=await c.getSummary(a.agentId,d,"",""),g=Number(b),h=g>0?Number(e)/Math.pow(10,Number(f)):0;p({count:g,avg:h})}catch{p({count:0,avg:0})}let e=[];for(let b of d){let d=Number(await c.getLastIndex(a.agentId,b));for(let f=1;f<=d;f++)try{let[d,,g,h,i]=await c.readFeedback(a.agentId,b,f);i||e.push({clientAddress:b,index:f,value:Number(d),tag1:g,tag2:h,isRevoked:i})}catch{}}m(e)}catch(a){console.error("Failed to fetch feedback:",a)}finally{r(!1)}}async function C(){if(d&&e&&a.agentId&&"pending"!==a.agentId){t(!0),v(null);try{let b=`I give feedback score ${w}/5 to agent #${a.agentId} (${a.name}) on ${i.name} via 8004agent.network`,c=await e.signMessage(b),f={network:i.facinetNetwork,chainId:i.chainId},k=await (0,j.selectFacilitator)(f),l=g.ethers.keccak256(g.ethers.toUtf8Bytes(c));await (0,j.facinetExecuteContract)(f,{contractAddress:i.reputationRegistry,functionName:"giveFeedback",functionArgs:[a.agentId,w,0,"rating",y||"",a.url||"",`sig:${d}`,l],abi:h.REPUTATION_REGISTRY_ABI},k),v("Feedback submitted on-chain!"),z(""),x(5),A.current=!1,r(!0),B()}catch(b){let a=b instanceof Error?b.message:String(b);v(`Failed: ${a}`)}finally{t(!1)}}}return(0,c.useEffect)(()=>{if(!A.current){if(A.current=!0,!a.agentId||"pending"===a.agentId||!i)return void r(!1);B()}},[]),(0,b.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:"Reputation"}),q?(0,b.jsx)("div",{className:"flex gap-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"flex-1 h-20 bg-muted-foreground/5 border border-border animate-pulse"},a))}):(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"border border-border p-4 text-center",children:[(0,b.jsx)("span",{className:"font-mono text-2xl font-bold text-foreground block",children:n?`${n.avg.toFixed(1)}/5`:"—"}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/60",children:"Avg Score"})]}),(0,b.jsxs)("div",{className:"border border-border p-4 text-center",children:[(0,b.jsx)("span",{className:"font-mono text-2xl font-bold text-foreground block",children:n?.count??0}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/60",children:"Total Feedback"})]}),(0,b.jsxs)("div",{className:"border border-border p-4 text-center",children:[(0,b.jsx)("span",{className:"font-mono text-2xl font-bold text-foreground block",children:n?Math.round(20*n.avg):0}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/60",children:"Score /100"})]})]})]}),(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:"Give Feedback"}),d?a.ownerAddress&&d.toLowerCase()===a.ownerAddress.toLowerCase()?(0,b.jsx)("div",{className:"border border-border px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-muted-foreground/60",children:"You cannot review your own agent"})}):(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:"Score"}),(0,b.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{onClick:()=>x(a),className:(0,f.cn)("w-10 h-10 font-mono text-sm font-bold border transition-colors",a===w?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:"Comment (optional)"}),(0,b.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),placeholder:"Your feedback...",rows:3,className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-foreground/40 transition-colors resize-none no-scrollbar"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:C,disabled:s||!a.agentId||"pending"===a.agentId,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-6 py-2.5 hover:opacity-90 transition-opacity disabled:opacity-30",children:s?"Submitting...":"Submit Feedback"}),(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/40 uppercase tracking-wider",children:"Gas covered by Facinet"})]}),u&&(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-xs uppercase tracking-wider",u.startsWith("Failed")?"text-error-red":"text-system-green"),children:u})]}):(0,b.jsx)("div",{className:"border border-warning-amber/40 bg-warning-amber/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-warning-amber",children:"Connect wallet from navbar to give feedback"})})]}),!q&&l.length>0&&(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),(0,b.jsxs)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:["Feedback (",l.length,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:l.map((a,c)=>(0,b.jsxs)("div",{className:"border border-border/60 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40",children:[a.clientAddress.slice(0,6),"...",a.clientAddress.slice(-4)]}),a.tag1&&(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border/40 px-1.5 py-0.5",children:a.tag1})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[Array.from({length:5}).map((c,d)=>(0,b.jsx)("span",{className:(0,f.cn)("text-sm",d<a.value?"text-warning-amber":"text-border"),children:"★"},d)),(0,b.jsxs)("span",{className:"font-mono text-xs text-foreground ml-1",children:[a.value,"/5"]})]})]}),a.tag2&&(0,b.jsx)("p",{className:"font-mono text-[11px] text-muted-foreground leading-relaxed",children:a.tag2})]},`${a.clientAddress}-${a.index}-${c}`))})]}),!q&&0===l.length&&(0,b.jsxs)("div",{className:"border border-border p-5 relative text-center",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground/40",children:"No feedback yet — be the first to review this agent"})]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=app_agents_page_tsx_f5f08ed8._.js.map