module.exports=[76082,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(97895),g=a.i(83103),h=a.i(53250),i=a.i(43335),j=a.i(85085),k=a.i(38867);let l=["single","daily","monthly","biannual"],m={single:"1",daily:"24h",monthly:"30d",biannual:"6mo"},n={single:"",daily:"20% OFF",monthly:"40% OFF",biannual:"55% OFF"};function o({opacity:a=20}){let c=`border-foreground/${a}`;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:`absolute top-2 left-2 w-3 h-3 border-t border-l ${c}`}),(0,b.jsx)("div",{className:`absolute top-2 right-2 w-3 h-3 border-t border-r ${c}`}),(0,b.jsx)("div",{className:`absolute bottom-2 left-2 w-3 h-3 border-b border-l ${c}`}),(0,b.jsx)("div",{className:`absolute bottom-2 right-2 w-3 h-3 border-b border-r ${c}`})]})}function p(){let a=(0,d.useSearchParams)(),p=(0,d.useRouter)(),{walletAddress:q,isConnecting:r,connect:s}=(0,j.useWallet)(),t=a.get("network")||"",u=a.get("agentId")||"",[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)("fuji"),[J,K]=(0,c.useState)(!0),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(null);async function T(){if(!q||!v||!F||!x)return;let a=x[F];if(a){M(!0),O("Preparing gasless payment..."),Q(null);try{let b=g.CONTRACTS[H];if(!b)throw Error(`Unknown chain: ${H}`);let c=g.CHAIN_USDC[H];if(!c)throw Error(`No USDC address for chain: ${H}`);let d="fuji"===H?v.agentWalletAddress:B;if(!d)throw Error("fuji"===H?"Agent has no wallet address configured":"Relayer address not available for bridging");let e=k.ethers.parseUnits(a.price.toString(),g.USDC_DECIMALS);O(`Selecting facilitator on ${b.name}...`);let f={network:b.facinetNetwork,chainId:b.chainId},j=await (0,i.selectFacilitator)(f);O(`Sending $${a.price.toFixed(2)} USDC via x402 (gas-free)...`);let l=(await (0,i.facinetExecuteContract)(f,{contractAddress:c,functionName:"transfer",functionArgs:[d,e.toString()],abi:g.USDC_ABI},j)).txHash,m="";if("fuji"!==H&&l){O("Initiating CCTP bridge to Avalanche Fuji...");try{m=(await (0,h.apiBridgeInitiate)({sourceChain:H,paymentTxHash:l,amount:a.price.toString(),finalRecipient:v.agentWalletAddress,purpose:"hire"})).bridgeId}catch(a){console.error("Bridge initiation failed:",a)}}O("Recording hire...");let n=await (0,h.apiRecordHire)({network:t,agentId:u,buyerAddress:q,plan:F,paymentTxHash:l,callsTotal:a.calls,daysValid:a.days,pricePaid:a.price.toString(),paymentChain:H,bridgeId:m});O("Success! Redirecting to workspace..."),setTimeout(()=>{p.push(`/workspace?network=${t}&agentId=${u}&hireId=${n.hireId}`)},1500)}catch(a){Q(a instanceof Error?a.message:String(a)),O(null)}finally{M(!1)}}}async function U(){if(q){M(!0),Q(null);try{let a=await (0,h.apiRecordHire)({network:t,agentId:u,buyerAddress:q,plan:"free",paymentTxHash:"free",callsTotal:999999,daysValid:365,pricePaid:"0",paymentChain:"fuji"});p.push(`/workspace?network=${t}&agentId=${u}&hireId=${a.hireId}`)}catch(a){Q(a instanceof Error?a.message:"Failed to record hire")}finally{M(!1)}}}if((0,c.useEffect)(()=>{t&&u?async function(){try{let[a,b]=await Promise.all([(0,h.apiGetAgent)(t,u),(0,h.apiGetPlans)(t,u)]);w(a),b.free?E(!0):(y(b.plans),A(b.perCallPrice||0),G("single"),b.relayerAddress&&C(b.relayerAddress))}catch(a){Q(a instanceof Error?a.message:"Failed to load agent")}finally{K(!1)}}():K(!1)},[t,u]),(0,c.useEffect)(()=>{q&&t&&u&&(0,h.apiCheckActiveHire)(q,t,u).then(a=>{a.active&&a.hire&&S(a.hire.hireId)}).catch(()=>{})},[q,t,u]),!t||!u)return(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center",children:(0,b.jsx)("div",{className:"border border-error-red/40 bg-error-red/5 px-6 py-4",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:"Missing network or agentId parameter"})})})});if(J)return(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,b.jsxs)("div",{className:"w-full max-w-3xl animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 w-48 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-32 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{className:"h-40 bg-muted-foreground/10 rounded"},a))})]})})});if(!v)return(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center",children:(0,b.jsx)("div",{className:"border border-error-red/40 bg-error-red/5 px-6 py-4",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:P||"Agent not found"})})})});let V="active"===v.status,W=g.CONTRACTS[t]?.name||t;return(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,b.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,b.jsx)("button",{onClick:()=>p.back(),className:"font-mono text-xs uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors mb-6",children:"← Back"}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},children:[(0,b.jsx)("h1",{className:"font-mono text-3xl md:text-4xl font-bold tracking-tight uppercase text-foreground mb-2",children:"HIRE AGENT"}),(0,b.jsx)("p",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-8",children:"Select a plan and pay with USDC (gas-free via x402)"})]}),(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.05},children:(0,b.jsxs)("div",{className:"border border-border p-5 relative mb-8",children:[(0,b.jsx)(o,{}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:(0,f.cn)("h-2.5 w-2.5 rounded-full",V?"bg-system-green":"bg-error-red")}),(0,b.jsx)("span",{className:"font-mono text-lg font-bold uppercase tracking-wider text-foreground",children:v.name}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground/60",children:["#",u]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border px-1.5 py-0.5",children:W}),(v.mcpEndpoint||v.a2aEndpoint)&&(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-info-blue border border-info-blue/30 px-1.5 py-0.5",children:v.a2aEndpoint?"A2A":"MCP"})]}),v.description&&(0,b.jsx)("p",{className:"font-mono text-[11px] text-muted-foreground leading-relaxed",children:v.description})]})}),R&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"border border-system-green/40 bg-system-green/5 px-4 py-3 mb-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-system-green",children:"You already have an active hire for this agent"}),(0,b.jsx)("button",{onClick:()=>p.push(`/workspace?network=${t}&agentId=${u}&hireId=${R}`),className:"font-mono text-[10px] uppercase tracking-widest px-4 py-1.5 bg-system-green/10 border border-system-green/40 text-system-green hover:bg-system-green/20 transition-colors",children:"OPEN WORKSPACE"})]})}),D?(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,b.jsxs)("div",{className:"border border-system-green/30 p-6 relative text-center",children:[(0,b.jsx)(o,{}),(0,b.jsx)("span",{className:"font-mono text-2xl font-bold text-system-green block mb-2",children:"FREE"}),(0,b.jsx)("p",{className:"font-mono text-xs text-muted-foreground mb-4",children:"This agent is free to use. No payment required."}),q?(0,b.jsx)("button",{onClick:U,disabled:L,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 disabled:opacity-30",children:L?"SETTING UP...":"START USING"}):(0,b.jsx)("button",{onClick:s,disabled:r,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 disabled:opacity-30",children:r?"CONNECTING...":"CONNECT WALLET"})]})}):x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-widest text-foreground",children:"Select Plan"}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-muted-foreground/50",children:["$",z.toFixed(4)," per call"]}),(0,b.jsx)("div",{className:"flex-1 h-[1px] bg-border"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:l.map(a=>{let c=x[a];if(!c)return null;let d=F===a,e=n[a];return(0,b.jsxs)("button",{onClick:()=>G(a),className:(0,f.cn)("border p-4 relative text-left transition-colors",d?"border-foreground bg-foreground/5":"border-border hover:border-foreground/30"),children:[(0,b.jsx)(o,{opacity:d?30:10}),e&&(0,b.jsx)("span",{className:"absolute top-0 right-0 font-mono text-[8px] uppercase tracking-wider text-system-green bg-system-green/10 border-l border-b border-system-green/30 px-1.5 py-0.5",children:e}),(0,b.jsx)("span",{className:"font-mono text-lg font-bold text-foreground/40 block mb-3",children:m[a]}),(0,b.jsx)("span",{className:"font-mono text-xs font-bold uppercase tracking-wider text-foreground block mb-1",children:c.label}),(0,b.jsxs)("span",{className:"font-mono text-lg font-bold text-foreground block",children:["$",c.price.toFixed(2)]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50 block mt-1",children:[c.calls.toLocaleString()," call",1!==c.calls?"s":""," / ",c.days,"d"]})]},a)})})]}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.12},children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-widest text-foreground",children:"Pay On"}),(0,b.jsx)("div",{className:"flex-1 h-[1px] bg-border"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-8",children:g.PAYMENT_CHAINS.map(a=>{let c=H===a.key;return(0,b.jsxs)("button",{onClick:()=>I(a.key),className:(0,f.cn)("border p-3 relative text-left transition-colors",c?"border-foreground bg-foreground/5":"border-border hover:border-foreground/30"),children:[(0,b.jsx)("span",{className:"font-mono text-xs font-bold uppercase tracking-wider text-foreground block",children:a.label}),a.cctp&&(0,b.jsx)("span",{className:"font-mono text-[8px] uppercase tracking-wider text-muted-foreground/50 mt-1 block",children:"CCTP Bridge to Fuji"}),!a.cctp&&(0,b.jsx)("span",{className:"font-mono text-[8px] uppercase tracking-wider text-system-green/60 mt-1 block",children:"Direct Payment"})]},a.key)})})]}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.15},children:[(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(o,{}),q?F&&x[F]?(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1",children:"Total"}),(0,b.jsxs)("span",{className:"font-mono text-2xl font-bold text-foreground",children:["$",x[F].price.toFixed(2)]}),(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground ml-2",children:"USDC"})]}),(0,b.jsx)("button",{onClick:T,disabled:L,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 disabled:opacity-30",children:L?"PROCESSING...":"PAY & START"})]}):null:(0,b.jsxs)("div",{className:"text-center py-2",children:[(0,b.jsx)("p",{className:"font-mono text-xs text-muted-foreground mb-4 uppercase tracking-widest",children:"Connect wallet to pay"}),(0,b.jsx)("button",{onClick:s,disabled:r,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 disabled:opacity-30",children:r?"CONNECTING...":"CONNECT WALLET"})]}),N&&(0,b.jsx)("div",{className:"mt-4 border-t border-border pt-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-info-blue",children:N})}),P&&(0,b.jsx)("div",{className:"mt-4 border border-error-red/40 bg-error-red/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:P})})]}),(0,b.jsxs)("p",{className:"font-mono text-[9px] text-muted-foreground/40 uppercase tracking-widest mt-3 text-center",children:["Gas-free x402 payment via Facinet","fuji"!==H?" — CCTP bridge settles on Avalanche Fuji":""]})]})]}):null]})})})}function q(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,b.jsxs)("div",{className:"w-full max-w-3xl animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 w-48 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-32 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{className:"h-40 bg-muted-foreground/10 rounded"},a))})]})})}),children:(0,b.jsx)(p,{})})}a.s(["default",()=>q])}];

//# sourceMappingURL=app_hire_page_tsx_c71321cd._.js.map