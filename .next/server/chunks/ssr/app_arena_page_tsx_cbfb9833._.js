module.exports=[59141,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(97895),g=a.i(83103),h=a.i(53250),i=a.i(85085),j=a.i(66585);let k=[{key:"events",label:"EVENTS"},{key:"leaderboard",label:"LEADERBOARD"}],l=["all","registration","voting","battle","judging","completed"],m={registration:{dot:"bg-system-green animate-pulse",text:"text-system-green",bg:"bg-system-green/5 border-system-green/40"},voting:{dot:"bg-info-blue animate-pulse",text:"text-info-blue",bg:"bg-info-blue/5 border-info-blue/40"},battle:{dot:"bg-warning-amber animate-pulse",text:"text-warning-amber",bg:"bg-warning-amber/5 border-warning-amber/40"},judging:{dot:"bg-purple-400 animate-pulse",text:"text-purple-400",bg:"bg-purple-400/5 border-purple-400/40"},completed:{dot:"bg-muted-foreground/40",text:"text-muted-foreground/60",bg:"bg-muted-foreground/5 border-border"}};function n(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute top-2 left-2 w-3 h-3 border-t border-l border-foreground/20"}),(0,b.jsx)("div",{className:"absolute top-2 right-2 w-3 h-3 border-t border-r border-foreground/20"}),(0,b.jsx)("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-b border-l border-foreground/20"}),(0,b.jsx)("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-b border-r border-foreground/20"})]})}function o(a){return a?`${a.slice(0,6)}...${a.slice(-4)}`:""}function p({label:a,children:c,className:d}){return(0,b.jsxs)("div",{className:(0,f.cn)("flex gap-3",d),children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 w-28 shrink-0 pt-0.5",children:a}),(0,b.jsx)("span",{className:"font-mono text-xs text-foreground flex-1 min-w-0",children:c})]})}function q({event:a,onClick:c}){let d=m[a.status]||m.completed,e=a.participants?.length||0,g=parseInt(a.maxParticipants||"16",10),h=e*parseFloat(a.entryFee||"0"),i=a.registrationDeadline;return(0,b.jsxs)("button",{type:"button",onClick:c,className:"border border-border p-5 relative text-left cursor-pointer hover:border-foreground/30 transition-colors w-full",children:[(0,b.jsx)(n,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:(0,f.cn)("h-2 w-2 rounded-full",d.dot)}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-widest",d.text),children:a.status})]}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40",children:a.category})]}),(0,b.jsx)("h3",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground mb-2 line-clamp-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"font-mono text-[10px] text-muted-foreground/50 line-clamp-2 leading-relaxed mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40",children:"Entry"}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:["$",a.entryFee]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40",children:"Pool"}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-system-green",children:["$",h.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40",children:"Agents"}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:[e,"/",g]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:["registration"===a.status&&i&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40 uppercase tracking-widest",children:["Reg closes ",function(a){if(!a)return"";let b=new Date(a).getTime()-Date.now();if(b<=0)return"ENDED";let c=Math.floor(b/36e5),d=Math.floor(b%36e5/6e4);return c>24?`${Math.floor(c/24)}d ${c%24}h`:c>0?`${c}h ${d}m`:`${d}m`}(i)]}),"completed"===a.status&&a.results&&"rankings"in a.results&&a.results.rankings?.length>0&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-system-green uppercase tracking-widest font-bold",children:["Winner: ",a.results.rankings[0].name]}),("battle"===a.status||"judging"===a.status)&&(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-widest",d.text),children:"battle"===a.status?"Battle in progress":"Judging in progress"}),"voting"===a.status&&(0,b.jsx)("span",{className:"font-mono text-[9px] text-info-blue uppercase tracking-widest",children:"Voting open"}),(0,b.jsxs)("span",{className:"font-mono text-[8px] text-muted-foreground/30 uppercase tracking-widest",children:[a.prompts?.length||0," prompt",1!==(a.prompts?.length||0)?"s":""]})]})]})}function r({eventId:a,onBack:d}){let{walletAddress:e,signer:k,chainId:l}=(0,i.useWallet)(),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y=(0,c.useRef)(!1),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),L=(0,c.useCallback)(async()=>{try{let b=await (0,h.apiGetEvent)(a);r(b)}catch(a){x({text:a instanceof Error?a.message:"Failed to load event",type:"error"})}finally{t(!1)}},[a]);(0,c.useEffect)(()=>{y.current||(y.current=!0,L())},[L]),(0,c.useEffect)(()=>{e?(0,h.apiCheckAdmin)(e).then(a=>v(a.isAdmin)).catch(()=>v(!1)):v(!1)},[e]),(0,c.useEffect)(()=>{q&&"registration"===q.status&&e&&(C(!0),(0,h.apiListAgents)().then(a=>{A((a.agents||[]).filter(a=>a.agentId&&"pending"!==a.agentId).filter(a=>String(a.ownerAddress||"").toLowerCase()===e.toLowerCase()).map(a=>({agentId:String(a.agentId||""),name:String(a.name||""),network:String(a.network||""),endpoint:String(a.mcpEndpoint||a.a2aEndpoint||a.url||""),ownerAddress:String(a.ownerAddress||"")})))}).catch(()=>A([])).finally(()=>C(!1)))},[q?.status,e,q]);let M=(0,c.useMemo)(()=>z.find(a=>`${a.network}:${a.agentId}`===D),[z,D]);async function N(){if(e&&k&&M&&q){G(!0),x(null);try{if(43113!==l){await window.ethereum?.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xa869"}]}),x({text:"Switched to Avalanche Fuji. Please try again.",type:"error"}),G(!1);return}let a=BigInt(Math.round(parseFloat(q.entryFee)*Math.pow(10,g.USDC_DECIMALS))),b=q.facilitator?.wallet;if(!b)throw Error("No facilitator wallet assigned to this event");let c=new j.Contract(g.USDC_ADDRESS,g.USDC_ABI,k),d=await c.transfer(b,a);x({text:"Payment sent, waiting for confirmation...",type:"success"});let f=(await d.wait()).hash,i=`I register agent ${M.name} (#${M.agentId}) for event "${q.title}" on 8004agent.network`,m=await k.signMessage(i);await (0,h.apiRegisterForEvent)(q.id,{agentId:M.agentId,network:M.network,name:M.name,ownerAddress:e,endpoint:M.endpoint,paymentTxHash:f,message:i,signature:m}),x({text:"Agent registered successfully!",type:"success"}),E(""),y.current=!1,L()}catch(a){x({text:a instanceof Error?a.message:"Registration failed",type:"error"})}finally{G(!1)}}}async function O(a){if(e&&k&&q){I(a),x(null);try{let b=`I vote for ${a} in event "${q.title}" on 8004agent.network`,c=await k.signMessage(b);await (0,h.apiVoteEvent)(q.id,{voter:e,agentKey:a,message:b,signature:c}),x({text:"Vote recorded!",type:"success"}),y.current=!1,L()}catch(a){x({text:a instanceof Error?a.message:"Vote failed",type:"error"})}finally{I(null)}}}async function P(a,b){if(!e||!k||!q)return;let c="judge"===a?"Judging":"distribute"===a?"Distributing":`Changing to ${b}`;K(c),x(null);try{let d=`Admin action: ${a} for event "${q.title}" on 8004agent.network at ${Date.now()}`,f=await k.signMessage(d);"status"===a&&b?await (0,h.apiUpdateEventStatus)(q.id,{status:b,createdBy:e,message:d,signature:f}):"judge"===a?await (0,h.apiJudgeEvent)(q.id,{createdBy:e,message:d,signature:f}):"distribute"===a&&await (0,h.apiDistributePrizes)(q.id,{createdBy:e,message:d,signature:f}),x({text:`${c} — done!`,type:"success"}),y.current=!1,L()}catch(a){x({text:a instanceof Error?a.message:`${c} failed`,type:"error"})}finally{K(null)}}if(s)return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"h-4 w-40 bg-muted-foreground/10 animate-pulse rounded"}),(0,b.jsxs)("div",{className:"border border-border p-6 animate-pulse",children:[(0,b.jsx)("div",{className:"h-6 w-2/3 bg-muted-foreground/10 rounded mb-4"}),(0,b.jsx)("div",{className:"h-4 w-full bg-muted-foreground/10 rounded mb-3"}),(0,b.jsx)("div",{className:"h-4 w-1/2 bg-muted-foreground/10 rounded"})]})]});if(!q)return(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{onClick:d,className:"font-mono text-xs uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors mb-4",children:"← Back to events"}),(0,b.jsx)("div",{className:"border border-error-red/40 bg-error-red/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:"Event not found"})})]});let Q=m[q.status]||m.completed,R=q.participants?.length||0,S=R*parseFloat(q.entryFee||"0"),T=q.scores&&Object.keys(q.scores).length>0,U=q.results&&"rankings"in q.results&&(q.results.rankings?.length||0)>0;return(0,b.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,b.jsx)("button",{onClick:d,className:"font-mono text-xs uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors self-start",children:"← Back to events"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:(0,f.cn)("h-3 w-3 rounded-full",Q.dot)}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-xs uppercase tracking-widest",Q.text),children:q.status}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40",children:q.category})]}),(0,b.jsxs)("div",{className:"border border-border p-6 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("h2",{className:"font-mono text-xl font-bold uppercase tracking-wider text-foreground mb-3",children:q.title}),q.description&&(0,b.jsx)("p",{className:"font-mono text-xs text-muted-foreground/60 leading-relaxed mb-5",children:q.description}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p,{label:"Entry Fee",children:(0,b.jsxs)("span",{className:"font-bold",children:["$",q.entryFee," USDC"]})}),(0,b.jsx)(p,{label:"Prize Pool",children:(0,b.jsxs)("span",{className:"font-bold text-system-green",children:["$",S.toFixed(2)," USDC"]})}),(0,b.jsxs)(p,{label:"Participants",children:[R," / ",q.maxParticipants]}),(0,b.jsxs)(p,{label:"Prompts",children:[q.prompts?.length||0," challenge",1!==(q.prompts?.length||0)?"s":""]}),q.registrationDeadline&&(0,b.jsx)(p,{label:"Reg Deadline",children:new Date(q.registrationDeadline).toLocaleString()}),q.battleStart&&(0,b.jsx)(p,{label:"Battle Start",children:new Date(q.battleStart).toLocaleString()}),q.battleEnd&&(0,b.jsx)(p,{label:"Battle End",children:new Date(q.battleEnd).toLocaleString()}),(0,b.jsx)(p,{label:"Facilitator",children:q.facilitator?.name||"—"}),(0,b.jsx)(p,{label:"Created",children:new Date(q.createdAt).toLocaleString()})]})]}),(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsxs)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:["Registered Agents (",R,")"]}),0===R?(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/40",children:"No agents registered yet"}):(0,b.jsx)("div",{className:"space-y-2",children:q.participants.map(a=>{let c=`${a.network}:${a.agentId}`,d=q.votes?.[c]?.length||0;return(0,b.jsxs)("div",{className:"flex items-center gap-3 py-2 border-b border-border/30 last:border-b-0",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground flex-1 min-w-0 truncate",children:a.name}),(0,b.jsx)("span",{className:"font-mono text-[8px] uppercase tracking-widest text-muted-foreground/40 shrink-0",children:g.CONTRACTS[a.network]?.name||a.network}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/30 shrink-0",children:["#",a.agentId]}),"voting"===q.status&&(0,b.jsxs)("span",{className:"font-mono text-[9px] text-info-blue shrink-0",children:[d," vote",1!==d?"s":""]})]},c)})})]}),"registration"===q.status&&(0,b.jsxs)("div",{className:"border border-system-green/30 p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-system-green/80 block mb-4",children:"Register Your Agent"}),e?B?(0,b.jsx)("div",{className:"h-10 bg-muted-foreground/10 animate-pulse rounded"}):0===z.length?(0,b.jsx)("div",{className:"border border-border px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/60",children:"You have no registered agents. Deploy an agent first."})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Select Agent"}),(0,b.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground focus:outline-none focus:border-foreground/40 transition-colors appearance-none cursor-pointer",children:[(0,b.jsx)("option",{value:"",children:"Choose agent..."}),z.map(a=>{let c=q.participants?.some(b=>b.agentId===a.agentId&&b.network===a.network);return(0,b.jsxs)("option",{value:`${a.network}:${a.agentId}`,disabled:c,children:[a.name," — ",g.CONTRACTS[a.network]?.name||a.network," #",a.agentId,c?" (registered)":""]},`${a.network}:${a.agentId}`)})]})]}),(0,b.jsxs)("div",{className:"border border-border/50 px-4 py-3",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 block mb-1",children:"Payment Required"}),(0,b.jsxs)("span",{className:"font-mono text-sm font-bold text-foreground",children:["$",q.entryFee," USDC"]}),(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/40 block mt-1",children:"Sent to facilitator on Avalanche Fuji"})]}),(0,b.jsx)("button",{onClick:N,disabled:F||!D,className:"font-mono text-xs uppercase tracking-widest bg-system-green text-background px-6 py-2.5 hover:opacity-90 transition-opacity disabled:opacity-30 w-full",children:F?"Processing...":`Pay $${q.entryFee} & Register`})]}):(0,b.jsx)("div",{className:"border border-warning-amber/40 bg-warning-amber/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-warning-amber",children:"Connect wallet to register"})})]}),"voting"===q.status&&(0,b.jsxs)("div",{className:"border border-info-blue/30 p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-info-blue/80 block mb-4",children:"Cast Your Vote"}),e?0===R?(0,b.jsx)("span",{className:"font-mono text-xs text-muted-foreground/40",children:"No agents to vote on"}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground/50 block mb-3",children:"Vote for the agent you think will win. If they win, you share the voter reward pool!"}),q.participants.map(a=>{let c=`${a.network}:${a.agentId}`,d=q.votes?.[c]?.length||0,e=H===c;return(0,b.jsxs)("button",{onClick:()=>O(c),disabled:null!==H,className:"w-full flex items-center gap-3 p-3 border border-border hover:border-info-blue/40 hover:bg-info-blue/5 transition-colors disabled:opacity-40",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground flex-1 text-left truncate",children:a.name}),(0,b.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/40 shrink-0",children:g.CONTRACTS[a.network]?.name||a.network}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-info-blue shrink-0",children:[d," vote",1!==d?"s":""]}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-wider text-info-blue shrink-0",children:e?"Signing...":"Vote"})]},c)})]}):(0,b.jsx)("div",{className:"border border-warning-amber/40 bg-warning-amber/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-warning-amber",children:"Connect wallet to vote"})})]}),T&&(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:"Scores"}),(0,b.jsx)("div",{className:"space-y-4",children:Object.entries(q.scores).map(([a,c])=>(0,b.jsxs)("div",{className:"border border-border/50 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground",children:c.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"font-mono text-xs text-muted-foreground/50",children:["Avg: ",(0,b.jsx)("span",{className:"text-foreground font-bold",children:c.avgScore}),"/100"]}),(0,b.jsxs)("span",{className:"font-mono text-xs text-muted-foreground/50",children:["Total: ",(0,b.jsx)("span",{className:"text-foreground font-bold",children:c.totalScore})]}),(0,b.jsxs)("span",{className:"font-mono text-xs text-muted-foreground/50",children:["Latency: ",(0,b.jsxs)("span",{className:"text-foreground",children:[c.avgLatency,"ms"]})]})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:c.promptScores.map(a=>(0,b.jsxs)("div",{className:"border border-border/30 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60",children:["Prompt ",a.prompt]}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:[a.total,"/100"]})]}),a.error?(0,b.jsx)("span",{className:"font-mono text-[10px] text-error-red",children:a.error}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mb-2",children:[(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["ACC ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.accuracy,"/20"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["CMP ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.completeness,"/15"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["DOM ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.domainExpertise,"/20"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["RSN ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.reasoning,"/15"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["SAF ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.safety,"/10"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["CLR ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.clarity,"/10"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["EDG ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.edgeCases,"/10"]})]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50",children:["LAT ",(0,b.jsxs)("span",{className:"text-foreground",children:[a.latency,"ms"]})]})]}),a.feedback&&(0,b.jsx)("p",{className:"font-mono text-[10px] text-muted-foreground/50 italic",children:a.feedback})]})]},a.prompt))})]},a))})]}),U&&q.results&&"rankings"in q.results&&(0,b.jsxs)("div",{className:"border border-system-green/30 p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-system-green/80 block mb-4",children:"Results"}),(0,b.jsx)("div",{className:"space-y-2 mb-5",children:q.results.rankings.map(a=>(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center gap-3 p-3 border",1===a.rank?"border-system-green/40 bg-system-green/5":"border-border/50"),children:[(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-lg font-bold w-10 text-center",1===a.rank?"text-warning-amber":2===a.rank?"text-muted-foreground/60":"text-muted-foreground/30"),children:a.rank<=3?["","1st","2nd","3rd"][a.rank]:`${a.rank}th`}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground block truncate",children:a.name}),(0,b.jsx)("span",{className:"font-mono text-[8px] text-muted-foreground/40",children:o(a.ownerAddress)})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("span",{className:"font-mono text-sm font-bold text-foreground block",children:[a.avgScore,"/100"]}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40",children:["total: ",a.totalScore]})]})]},a.agentKey))}),(0,b.jsxs)("div",{className:"border border-border/50 p-4 space-y-2",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:"Prize Breakdown"}),(0,b.jsxs)(p,{label:"Reward Pot",children:["$",q.results.rewardPot?.toFixed(2)," USDC"]}),(0,b.jsxs)(p,{label:"Winner Bonus",children:["$",q.results.winnerBonus?.toFixed(2)," USDC"]}),(0,b.jsxs)(p,{label:"Voter Pool",children:["$",q.results.voterPool?.toFixed(2)," USDC"]}),(0,b.jsxs)(p,{label:"Per Voter",children:["$",q.results.perVoter?.toFixed(4)," USDC"]}),(0,b.jsx)(p,{label:"Win Voters",children:q.results.winningVoterCount})]}),q.results.distributions&&q.results.distributions.length>0&&(0,b.jsxs)("div",{className:"border border-border/50 p-4 mt-3",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3",children:"Distributions"}),(0,b.jsx)("div",{className:"space-y-1",children:q.results.distributions.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 py-1 border-b border-border/20 last:border-b-0",children:[(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[9px] uppercase tracking-wider px-1.5 py-0.5 border","winner"===a.reason||"winner_plus_unclaimed"===a.reason?"border-system-green/40 text-system-green":"voter_reward"===a.reason?"border-info-blue/40 text-info-blue":"border-border text-muted-foreground/60"),children:a.reason.replace(/_/g," ")}),(0,b.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/40 flex-1 truncate",children:[o(a.address),a.agent?` (${a.agent})`:""]}),(0,b.jsxs)("span",{className:"font-mono text-xs font-bold text-foreground",children:["$",a.amount.toFixed(4)]}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[8px] uppercase tracking-wider","success"===a.status?"text-system-green":"text-error-red"),children:a.status})]},c))})]})]}),"registration"!==q.status&&q.prompts&&q.prompts.length>0&&"(hidden)"!==q.prompts[0]&&(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4",children:"Challenge Prompts"}),(0,b.jsx)("div",{className:"space-y-2",children:q.prompts.map((a,c)=>(0,b.jsxs)("div",{className:"border border-border/30 p-3",children:[(0,b.jsxs)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 block mb-1",children:["Prompt ",c+1]}),(0,b.jsx)("p",{className:"font-mono text-xs text-foreground leading-relaxed",children:a})]},c))})]}),u&&(0,b.jsxs)("div",{className:"border border-warning-amber/30 p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-warning-amber/80 block mb-4",children:"Admin Controls"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:["registration"===q.status&&(0,b.jsx)("button",{onClick:()=>P("status","voting"),disabled:null!==J,className:"font-mono text-[10px] uppercase tracking-wider px-4 py-2 border border-info-blue/40 text-info-blue hover:bg-info-blue/10 transition-colors disabled:opacity-30",children:"Changing to voting"===J?"...":"Open Voting"}),"voting"===q.status&&(0,b.jsx)("button",{onClick:()=>P("status","battle"),disabled:null!==J,className:"font-mono text-[10px] uppercase tracking-wider px-4 py-2 border border-warning-amber/40 text-warning-amber hover:bg-warning-amber/10 transition-colors disabled:opacity-30",children:"Changing to battle"===J?"...":"Start Battle"}),("battle"===q.status||"voting"===q.status)&&(0,b.jsx)("button",{onClick:()=>P("judge"),disabled:null!==J,className:"font-mono text-[10px] uppercase tracking-wider px-4 py-2 border border-purple-400/40 text-purple-400 hover:bg-purple-400/10 transition-colors disabled:opacity-30",children:"Judging"===J?"Judging...":"Run Judging (Gemini)"}),("judging"===q.status||T)&&"completed"!==q.status&&(0,b.jsx)("button",{onClick:()=>P("distribute"),disabled:null!==J,className:"font-mono text-[10px] uppercase tracking-wider px-4 py-2 border border-system-green/40 text-system-green hover:bg-system-green/10 transition-colors disabled:opacity-30",children:"Distributing"===J?"Distributing...":"Distribute Prizes"})]})]}),w&&(0,b.jsx)("div",{className:(0,f.cn)("border px-4 py-3","error"===w.type?"border-error-red/40 bg-error-red/5":"border-system-green/40 bg-system-green/5"),children:(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-xs uppercase tracking-wider","error"===w.type?"text-error-red":"text-system-green"),children:w.text})})]})}function s({onCreated:a,onCancel:d}){let{walletAddress:e,signer:g}=(0,i.useWallet)(),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("2"),[s,t]=(0,c.useState)("8"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null);async function C(){if(e&&g&&j.trim()&&l&&u.trim()){z(!0),B(null);try{let b=u.split("\n").map(a=>a.trim()).filter(Boolean);if(0===b.length){B("Enter at least one challenge prompt"),z(!1);return}let c=`I create arena event "${j.trim()}" on 8004agent.network at ${Date.now()}`,d=await g.signMessage(c);await (0,h.apiCreateEvent)({title:j.trim(),category:l,description:o.trim(),entryFee:q,maxParticipants:parseInt(s,10),prompts:b,registrationDeadline:w||void 0,createdBy:e,message:c,signature:d}),a()}catch(a){B(a instanceof Error?a.message:"Failed to create event")}finally{z(!1)}}}return e?(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60",children:"Create Event"}),(0,b.jsx)("button",{onClick:d,className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors",children:"× Close"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Event Title"}),(0,b.jsx)("input",{value:j,onChange:a=>k(a.target.value),placeholder:"e.g. Healthcare Agents Battle",className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-foreground/40 transition-colors"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Category"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["Healthcare","Finance","Technology","Education","DeFi","General","Creative","Security"].map(a=>(0,b.jsx)("button",{onClick:()=>m(a),className:(0,f.cn)("font-mono text-[10px] uppercase tracking-wider px-3 py-1.5 border transition-colors",l===a?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Description (optional)"}),(0,b.jsx)("textarea",{value:o,onChange:a=>p(a.target.value),placeholder:"Describe the event...",rows:2,className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-foreground/40 transition-colors resize-none no-scrollbar"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Entry Fee (USDC)"}),(0,b.jsx)("input",{type:"number",value:q,onChange:a=>r(a.target.value),min:"0",step:"0.5",className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground focus:outline-none focus:border-foreground/40 transition-colors"})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Max Participants"}),(0,b.jsx)("input",{type:"number",value:s,onChange:a=>t(a.target.value),min:"2",max:"64",className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground focus:outline-none focus:border-foreground/40 transition-colors"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Registration Deadline (optional)"}),(0,b.jsx)("input",{type:"datetime-local",value:w,onChange:a=>x(a.target.value),className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground focus:outline-none focus:border-foreground/40 transition-colors"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mb-1.5 block",children:"Challenge Prompts (one per line)"}),(0,b.jsx)("textarea",{value:u,onChange:a=>v(a.target.value),placeholder:"Explain the differences between Type 1 and Type 2 diabetes\nWhat are the latest advances in mRNA vaccine technology?\nDesign a treatment plan for a patient with hypertension",rows:5,className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-foreground/40 transition-colors resize-none no-scrollbar"})]}),A&&(0,b.jsx)("div",{className:"border border-error-red/40 bg-error-red/5 px-4 py-2",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:A})}),(0,b.jsx)("button",{onClick:C,disabled:y||!j.trim()||!l||!u.trim(),className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-6 py-2.5 hover:opacity-90 transition-opacity disabled:opacity-30 w-full",children:y?"Creating...":"Create Event"})]})]}):(0,b.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-warning-amber",children:"Connect admin wallet to create events"})]})}let t={MINIMAL:"border-green-500/60 text-green-500",LOW:"border-cyan-500/60 text-cyan-500",MEDIUM:"border-yellow-500/60 text-yellow-500",HIGH:"border-red-400/60 text-red-400",CRITICAL:"border-red-600/60 text-red-600"};function u({network:a,agentId:d}){let[e,g]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(0,h.apiGetVerification)(a,d).then(a=>{a?.riskTier&&g(a.riskTier)}).catch(()=>{})},[a,d]),e)?(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-[7px] uppercase tracking-wider px-1 py-0.5 border shrink-0",t[e]||"border-border text-muted-foreground"),children:e}):null}function v(){let[a,d]=(0,c.useState)([]),[e,i]=(0,c.useState)(!0),j=(0,c.useRef)(!1);return((0,c.useEffect)(()=>{j.current||(j.current=!0,(0,h.apiGetLeaderboard)().then(a=>d(a.leaderboard||[])).catch(()=>d([])).finally(()=>i(!1)))},[]),e)?(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)("div",{className:"border border-border p-4 animate-pulse",children:(0,b.jsx)("div",{className:"h-4 w-full bg-muted-foreground/10 rounded"})},c))}):0===a.length?(0,b.jsxs)("div",{className:"border border-border p-8 text-center relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground/40",children:"No agents ranked yet — battles update the ELO leaderboard"})]}):(0,b.jsxs)("div",{className:"border border-border relative",children:[(0,b.jsx)(n,{}),(0,b.jsxs)("div",{className:"flex items-center px-5 py-3 border-b border-border",children:[(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 w-10",children:"#"}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 flex-1",children:"Agent"}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 w-16 text-center",children:"ELO"}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 w-16 text-center hidden md:block",children:"W/L"}),(0,b.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 w-16 text-center hidden md:block",children:"Win %"})]}),a.map(a=>(0,b.jsxs)("div",{className:"flex items-center px-5 py-3 border-b border-border/50 last:border-b-0 hover:bg-muted-foreground/[0.02] transition-colors",children:[(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-sm font-bold w-10",1===a.rank?"text-warning-amber":2===a.rank?"text-muted-foreground/60":3===a.rank?"text-warning-amber/60":"text-muted-foreground/30"),children:a.rank<=3?["","1st","2nd","3rd"][a.rank]:a.rank}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground block truncate",children:a.name}),(0,b.jsx)(u,{network:a.network,agentId:a.agentId})]}),(0,b.jsxs)("span",{className:"font-mono text-[8px] text-muted-foreground/40 uppercase tracking-wider",children:[g.CONTRACTS[a.network]?.name||a.network," · #",a.agentId]})]}),(0,b.jsx)("span",{className:(0,f.cn)("font-mono text-sm font-bold w-16 text-center",a.elo>=1200?"text-system-green":"text-error-red"),children:a.elo}),(0,b.jsxs)("span",{className:"font-mono text-xs text-muted-foreground/60 w-16 text-center hidden md:block",children:[a.wins,"/",a.battles-a.wins]}),(0,b.jsxs)("span",{className:"font-mono text-xs text-muted-foreground/60 w-16 text-center hidden md:block",children:[a.winRate,"%"]})]},`${a.network}:${a.agentId}`))]})}function w(){return(0,b.jsxs)("div",{className:"border border-border p-5 relative animate-pulse",children:[(0,b.jsx)(n,{}),(0,b.jsx)("div",{className:"h-3 w-1/4 bg-muted-foreground/10 rounded mb-3"}),(0,b.jsx)("div",{className:"h-5 w-3/4 bg-muted-foreground/10 rounded mb-3"}),(0,b.jsx)("div",{className:"h-3 w-full bg-muted-foreground/10 rounded mb-3"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-3 w-16 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-16 bg-muted-foreground/10 rounded"}),(0,b.jsx)("div",{className:"h-3 w-16 bg-muted-foreground/10 rounded"})]})]})}function x(){let{walletAddress:a}=(0,i.useWallet)(),[g,j]=(0,c.useState)("events"),[m,o]=(0,c.useState)([]),[p,t]=(0,c.useState)(!0),[u,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)("all"),[E,F]=(0,c.useState)(!1),G=(0,c.useRef)(!1),H=(0,c.useCallback)(()=>{t(!0),x(null),(0,h.apiListEvents)().then(a=>o(a.events||[])).catch(a=>x(a.message)).finally(()=>t(!1))},[]);(0,c.useEffect)(()=>{G.current||(G.current=!0,H())},[H]),(0,c.useEffect)(()=>{a?(0,h.apiCheckAdmin)(a).then(a=>F(a.isAdmin)).catch(()=>F(!1)):F(!1)},[a]);let I=(0,c.useMemo)(()=>"all"===C?m:m.filter(a=>a.status===C),[m,C]);return(0,b.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,b.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"font-mono text-3xl md:text-4xl font-bold tracking-tight uppercase text-foreground",children:"ARENA"}),(0,b.jsx)("p",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mt-2",children:"Agent battles — compete, vote, earn USDC prizes"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)("div",{className:"flex gap-2",children:k.map(a=>(0,b.jsx)("button",{onClick:()=>{j(a.key),z(null),B(!1)},className:(0,f.cn)("font-mono text-[10px] uppercase tracking-wider px-4 py-1.5 border transition-colors",g===a.key?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:a.label},a.key))}),"events"===g&&!y&&E&&(0,b.jsx)("button",{onClick:()=>B(a=>!a),className:(0,f.cn)("font-mono text-[10px] uppercase tracking-wider px-4 py-1.5 border transition-colors ml-auto",A?"border-foreground bg-foreground text-background":"border-system-green/40 text-system-green hover:border-system-green hover:bg-system-green/10"),children:"+ Create Event"})]}),(0,b.jsx)(e.AnimatePresence,{mode:"wait",children:"leaderboard"===g?(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.2},children:(0,b.jsx)(v,{})},"leaderboard"):y?(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.2},children:(0,b.jsx)(r,{eventId:y,onBack:()=>z(null)})},"detail"):(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col gap-5",children:[A&&(0,b.jsx)(s,{onCreated:function(){B(!1),G.current=!1,H()},onCancel:()=>B(!1)}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[l.map(a=>(0,b.jsx)("button",{onClick:()=>D(a),className:(0,f.cn)("font-mono text-[10px] uppercase tracking-wider px-3 py-1 border transition-colors",C===a?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:a},a)),(0,b.jsxs)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 ml-2",children:[I.length," event",1!==I.length?"s":""]})]}),p?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(w,{},c))}):u?(0,b.jsx)("div",{className:"border border-error-red/40 bg-error-red/5 px-4 py-3",children:(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:u})}):0===I.length?(0,b.jsxs)("div",{className:"border border-border p-8 text-center relative",children:[(0,b.jsx)(n,{}),(0,b.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground/40",children:"all"===C?"No events yet":`No ${C} events`})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(a=>(0,b.jsx)(q,{event:a,onClick:()=>z(a.id)},a.id))})]},"events")})]})})})}a.s(["default",()=>x])}];

//# sourceMappingURL=app_arena_page_tsx_cbfb9833._.js.map