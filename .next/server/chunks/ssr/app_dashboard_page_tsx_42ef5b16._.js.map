{"version":3,"sources":["../../../../app/dashboard/page.tsx","../../../../lib/dashboard.ts"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useCallback } from \"react\"\nimport { motion, AnimatePresence } from \"motion/react\"\nimport { cn } from \"@/lib/utils\"\nimport { CONTRACTS } from \"@/lib/deploy-constants\"\nimport {\n  apiListAgents,\n  apiListEvents,\n  apiGetLeaderboard,\n  apiGetVerification,\n  apiVerifyAgent,\n  apiGetMyHires,\n  apiWithdraw,\n  apiWithdrawStatus,\n  type ArenaEvent,\n  type LeaderboardEntry,\n  type VerificationResult,\n  type HireRecord,\n} from \"@/lib/api\"\nimport { USDC_ADDRESS } from \"@/lib/deploy-constants\"\nimport { useRouter } from \"next/navigation\"\nimport {\n  fetchAgentUsdcBalance,\n  fetchAgentReputation,\n  fetchAgentFeedbacks,\n  type FeedbackEntry,\n} from \"@/lib/dashboard\"\nimport { useWallet } from \"@/components/wallet-provider\"\n\n// ---- Types ----\ninterface Agent {\n  agentId: string\n  name: string\n  url: string\n  imageUrl: string\n  description: string\n  version: string\n  author: string\n  license: string\n  mcpEndpoint: string\n  a2aEndpoint: string\n  skills: string[]\n  domains: string[]\n  trustModels: string[]\n  x402Payment: string\n  metadataStorage: string\n  status: string\n  hirePrice: string\n  network: string\n  ownerAddress: string\n  registrationTx: string\n  registeredAt: string\n  agentWalletAddress: string\n  circleWalletId: string\n}\n\ninterface DashboardHire extends HireRecord {\n  agent?: {\n    name: string\n    description: string\n    status: string\n    [key: string]: unknown\n  }\n}\n\n// ---- Unique agents: group by name across networks ----\nfunction deduplicateAgents(agents: Agent[]): Agent[] {\n  const seen = new Map<string, Agent>()\n  for (const a of agents) {\n    const key = a.name.toLowerCase()\n    if (!seen.has(key)) seen.set(key, a)\n  }\n  return Array.from(seen.values())\n}\n\n// ---- Corner Brackets ----\nfunction CornerBrackets({ opacity = 20 }: { opacity?: number }) {\n  const cls = `border-foreground/${opacity}`\n  return (\n    <>\n      <div className={`absolute top-2 left-2 w-3 h-3 border-t border-l ${cls}`} />\n      <div className={`absolute top-2 right-2 w-3 h-3 border-t border-r ${cls}`} />\n      <div className={`absolute bottom-2 left-2 w-3 h-3 border-b border-l ${cls}`} />\n      <div className={`absolute bottom-2 right-2 w-3 h-3 border-b border-r ${cls}`} />\n    </>\n  )\n}\n\n// ---- Truncate Address ----\nfunction truncAddr(address: string) {\n  return `${address.slice(0, 6)}...${address.slice(-4)}`\n}\n\n// ---- Tier Styles ----\nfunction verificationLabel(score: number): string {\n  if (score >= 80) return `\\u2713 VERIFIED ${score}`\n  if (score >= 60) return `VERIFIED ${score}`\n  if (score >= 40) return `PARTIAL ${score}`\n  if (score >= 20) return `LOW ${score}`\n  return `RISK ${score}`\n}\n\nconst TIER_STYLES: Record<string, string> = {\n  MINIMAL: \"border-green-500/60 text-green-500 bg-green-500/5\",\n  LOW: \"border-cyan-500/60 text-cyan-500 bg-cyan-500/5\",\n  MEDIUM: \"border-yellow-500/60 text-yellow-500 bg-yellow-500/5\",\n  HIGH: \"border-red-400/60 text-red-400 bg-red-400/5\",\n  CRITICAL: \"border-red-600/60 text-red-600 bg-red-600/10\",\n}\n\nconst STATUS_COLORS: Record<string, string> = {\n  registration: \"text-system-green border-system-green/40\",\n  voting: \"text-info-blue border-info-blue/40\",\n  battle: \"text-warning-amber border-warning-amber/40\",\n  judging: \"text-purple-400 border-purple-400/40\",\n  completed: \"text-muted-foreground border-border\",\n}\n\n// ---- Main Page ----\nexport default function DashboardPage() {\n  const { walletAddress, isConnecting, connect, signedFetch } = useWallet()\n\n  // Data states\n  const [myAgents, setMyAgents] = useState<Agent[]>([])\n  const [allEvents, setAllEvents] = useState<ArenaEvent[]>([])\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([])\n  const [hiredAgents, setHiredAgents] = useState<DashboardHire[]>([])\n  const [balances, setBalances] = useState<Record<string, number>>({})\n  const [reputations, setReputations] = useState<Record<string, { count: number; avg: number }>>({})\n  const [verifications, setVerifications] = useState<Record<string, VerificationResult | null>>({})\n  const [feedbacks, setFeedbacks] = useState<Record<string, FeedbackEntry[]>>({})\n  const [expandedAgent, setExpandedAgent] = useState<string | null>(null)\n\n  // Loading states\n  const [loadingAgents, setLoadingAgents] = useState(true)\n  const [loadingArena, setLoadingArena] = useState(true)\n  const [loadingHires, setLoadingHires] = useState(true)\n  const [loadingBalances, setLoadingBalances] = useState(false)\n\n  // Primary data fetch\n  useEffect(() => {\n    if (!walletAddress) return\n\n    const addr = walletAddress.toLowerCase()\n\n    // Fetch agents\n    apiListAgents()\n      .then((data) => {\n        const all = (data.agents || []) as unknown as Agent[]\n        const owned = all.filter((a) => a.ownerAddress?.toLowerCase() === addr)\n        setMyAgents(deduplicateAgents(owned))\n      })\n      .catch(() => {})\n      .finally(() => setLoadingAgents(false))\n\n    // Fetch arena events + leaderboard in parallel\n    Promise.all([\n      apiListEvents().catch(() => ({ events: [] })),\n      apiGetLeaderboard().catch(() => ({ leaderboard: [] })),\n    ]).then(([evtData, lbData]) => {\n      setAllEvents((evtData.events || []) as ArenaEvent[])\n      setLeaderboard((lbData.leaderboard || []) as LeaderboardEntry[])\n    }).finally(() => setLoadingArena(false))\n\n    // Fetch hired agents (from Redis hire records)\n    apiGetMyHires(walletAddress)\n      .then((data) => setHiredAgents((data.hires || []) as unknown as DashboardHire[]))\n      .catch(() => {})\n      .finally(() => setLoadingHires(false))\n  }, [walletAddress])\n\n  // Secondary data: balances, reputation, verification (after agents loaded)\n  useEffect(() => {\n    if (myAgents.length === 0) return\n    setLoadingBalances(true)\n\n    const fetchSecondary = async () => {\n      const balMap: Record<string, number> = {}\n      const repMap: Record<string, { count: number; avg: number }> = {}\n      const verMap: Record<string, VerificationResult | null> = {}\n\n      await Promise.allSettled(\n        myAgents.map(async (agent) => {\n          const key = `${agent.network}:${agent.agentId}`\n\n          // Balance\n          if (agent.agentWalletAddress) {\n            balMap[key] = await fetchAgentUsdcBalance(agent.agentWalletAddress)\n          }\n\n          // Reputation\n          repMap[key] = await fetchAgentReputation(agent.network, agent.agentId)\n\n          // Verification\n          try {\n            const v = await apiGetVerification(agent.network, agent.agentId)\n            verMap[key] = v && v.riskTier ? v : null\n          } catch {\n            verMap[key] = null\n          }\n        })\n      )\n\n      setBalances(balMap)\n      setReputations(repMap)\n      setVerifications(verMap)\n      setLoadingBalances(false)\n    }\n\n    fetchSecondary()\n  }, [myAgents])\n\n  // Load feedbacks on agent expand\n  const handleExpand = useCallback(async (agent: Agent) => {\n    const key = `${agent.network}:${agent.agentId}`\n    if (expandedAgent === key) {\n      setExpandedAgent(null)\n      return\n    }\n    setExpandedAgent(key)\n    if (!feedbacks[key]) {\n      const fb = await fetchAgentFeedbacks(agent.network, agent.agentId)\n      setFeedbacks((prev) => ({ ...prev, [key]: fb }))\n    }\n  }, [expandedAgent, feedbacks])\n\n  // ---- Computed stats ----\n  const totalBalance = Object.values(balances).reduce((s, b) => s + b, 0)\n  const repValues = Object.values(reputations).filter((r) => r.count > 0)\n  const avgReputation = repValues.length > 0\n    ? repValues.reduce((s, r) => s + r.avg, 0) / repValues.length\n    : 0\n\n  // Arena stats for my agents\n  const myAgentKeys = new Set(myAgents.map((a) => `${a.network}:${a.agentId}`))\n  const myLeaderboardEntries = leaderboard.filter((e) => myAgentKeys.has(`${e.network}:${e.agentId}`))\n  const totalWins = myLeaderboardEntries.reduce((s, e) => s + e.wins, 0)\n  const totalBattles = myLeaderboardEntries.reduce((s, e) => s + e.battles, 0)\n\n  // Events my agents participated in\n  const myEvents = allEvents.filter((evt) =>\n    evt.participants?.some((p) => p.ownerAddress?.toLowerCase() === walletAddress?.toLowerCase())\n  )\n\n  // Prize money earned\n  const prizeMoney = myEvents.reduce((sum, evt) => {\n    if (!evt.results?.distributions) return sum\n    return sum + evt.results.distributions\n      .filter((d) => d.address?.toLowerCase() === walletAddress?.toLowerCase() && d.status === \"success\")\n      .reduce((s, d) => s + (d.amount || 0), 0)\n  }, 0)\n\n  // ---- Not connected ----\n  if (!walletAddress) {\n    return (\n      <div className=\"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar\">\n        <div className=\"flex-1 flex flex-col items-center justify-center px-4\">\n          <motion.div\n            initial={{ opacity: 0, y: 12 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"border border-border p-8 relative text-center max-w-md\"\n          >\n            <CornerBrackets />\n            <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-4\">\n              Wallet Required\n            </span>\n            <p className=\"font-mono text-xs text-muted-foreground leading-relaxed mb-6\">\n              Connect your wallet to view your agents, earnings, reputation, and arena performance.\n            </p>\n            <button\n              onClick={connect}\n              disabled={isConnecting}\n              className=\"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 transition-opacity disabled:opacity-30\"\n            >\n              {isConnecting ? \"CONNECTING...\" : \"CONNECT WALLET\"}\n            </button>\n          </motion.div>\n        </div>\n      </div>\n    )\n  }\n\n  // ---- Connected ----\n  return (\n    <div className=\"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar\">\n      <div className=\"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8\">\n        <div className=\"w-full max-w-6xl\">\n          {/* Header */}\n          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"mb-8\">\n            <h1 className=\"font-mono text-3xl md:text-4xl font-bold tracking-tight uppercase text-foreground\">\n              DASHBOARD\n            </h1>\n            <p className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 mt-2\">\n              {truncAddr(walletAddress)}\n            </p>\n          </motion.div>\n\n          {/* ═══════════ Section 1: Portfolio Overview ═══════════ */}\n          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.05 }}>\n            <SectionLabel label=\"Portfolio Overview\" />\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10\">\n              <StatCard\n                label=\"My Agents\"\n                value={loadingAgents ? \"...\" : String(myAgents.length)}\n                loading={loadingAgents}\n              />\n              <StatCard\n                label=\"Total Earned\"\n                value={loadingBalances ? \"...\" : `$${totalBalance.toFixed(2)}`}\n                subtext=\"USDC\"\n                color=\"text-system-green\"\n                loading={loadingBalances}\n              />\n              <StatCard\n                label=\"Avg Reputation\"\n                value={loadingBalances ? \"...\" : avgReputation > 0 ? `${avgReputation.toFixed(1)}` : \"N/A\"}\n                subtext={avgReputation > 0 ? \"/ 5.0\" : \"\"}\n                loading={loadingBalances}\n              />\n              <StatCard\n                label=\"Verified\"\n                value={loadingBalances ? \"...\" : `${Object.values(verifications).filter(Boolean).length} / ${myAgents.length}`}\n                subtext=\"agents verified\"\n                loading={loadingBalances}\n              />\n            </div>\n          </motion.div>\n\n          {/* ═══════════ Section 2: My Agents ═══════════ */}\n          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}>\n            <SectionLabel label=\"My Agents\" count={myAgents.length} />\n            {loadingAgents ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10\">\n                {Array.from({ length: 3 }).map((_, i) => <SkeletonCard key={i} />)}\n              </div>\n            ) : myAgents.length === 0 ? (\n              <div className=\"border border-border p-8 text-center mb-10\">\n                <span className=\"font-mono text-xs uppercase tracking-widest text-muted-foreground/60\">\n                  No agents registered yet. Deploy your first agent to get started.\n                </span>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10\">\n                {myAgents.map((agent) => {\n                  const key = `${agent.network}:${agent.agentId}`\n                  return (\n                    <DashboardAgentCard\n                      key={key}\n                      agent={agent}\n                      balance={balances[key]}\n                      reputation={reputations[key]}\n                      verification={verifications[key]}\n                      feedbackList={feedbacks[key]}\n                      isExpanded={expandedAgent === key}\n                      loadingBalance={loadingBalances}\n                      onToggle={() => handleExpand(agent)}\n                      onVerified={(v) => setVerifications((prev) => ({ ...prev, [key]: v }))}\n                      signedFetch={signedFetch}\n                    />\n                  )\n                })}\n              </div>\n            )}\n          </motion.div>\n\n          {/* ═══════════ Section 3: Earnings & Payments ═══════════ */}\n          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }}>\n            <SectionLabel label=\"Earnings & Payments\" />\n            <div className=\"border border-border p-5 relative mb-10\">\n              <CornerBrackets />\n              {loadingBalances || loadingAgents ? (\n                <div className=\"animate-pulse space-y-3\">\n                  <div className=\"h-8 w-32 bg-muted-foreground/10 rounded\" />\n                  <div className=\"h-3 w-full bg-muted-foreground/10 rounded\" />\n                  <div className=\"h-3 w-3/4 bg-muted-foreground/10 rounded\" />\n                </div>\n              ) : myAgents.length === 0 ? (\n                <span className=\"font-mono text-xs text-muted-foreground/60 uppercase tracking-widest\">\n                  No agents to show earnings for\n                </span>\n              ) : (\n                <>\n                  <div className=\"mb-5\">\n                    <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">\n                      Total Balance\n                    </span>\n                    <span className=\"font-mono text-3xl font-bold text-system-green\">\n                      ${totalBalance.toFixed(2)}\n                    </span>\n                    <span className=\"font-mono text-xs text-muted-foreground/60 ml-2\">USDC</span>\n                  </div>\n\n                  <div className=\"space-y-2 mb-5\">\n                    {myAgents.map((agent) => {\n                      const key = `${agent.network}:${agent.agentId}`\n                      const bal = balances[key] || 0\n                      return (\n                        <BalanceBar\n                          key={key}\n                          name={agent.name}\n                          balance={bal}\n                          total={totalBalance}\n                        />\n                      )\n                    })}\n                  </div>\n\n                  {prizeMoney > 0 && (\n                    <div className=\"border-t border-border pt-3 mb-4\">\n                      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">\n                        Arena Prize Money Earned\n                      </span>\n                      <span className=\"font-mono text-lg font-bold text-warning-amber\">\n                        ${prizeMoney.toFixed(2)} USDC\n                      </span>\n                    </div>\n                  )}\n\n                  <WithdrawSection agents={myAgents} balances={balances} walletAddress={walletAddress} onBalanceUpdate={(key, newBal) => setBalances((prev) => ({ ...prev, [key]: newBal }))} />\n                </>\n              )}\n            </div>\n          </motion.div>\n\n          {/* ═══════════ Section 4: Reputation & Feedback ═══════════ */}\n          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }}>\n            <SectionLabel label=\"Reputation & Feedback\" />\n            <div className=\"border border-border p-5 relative mb-10\">\n              <CornerBrackets />\n              {loadingBalances || loadingAgents ? (\n                <div className=\"animate-pulse space-y-3\">\n                  <div className=\"h-6 w-24 bg-muted-foreground/10 rounded\" />\n                  <div className=\"h-3 w-full bg-muted-foreground/10 rounded\" />\n                </div>\n              ) : repValues.length === 0 ? (\n                <span className=\"font-mono text-xs text-muted-foreground/60 uppercase tracking-widest\">\n                  No feedback received yet\n                </span>\n              ) : (\n                <>\n                  <div className=\"grid grid-cols-2 gap-4 mb-5\">\n                    <div>\n                      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">\n                        Total Feedbacks\n                      </span>\n                      <span className=\"font-mono text-2xl font-bold text-foreground\">\n                        {repValues.reduce((s, r) => s + r.count, 0)}\n                      </span>\n                    </div>\n                    <div>\n                      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">\n                        Average Score\n                      </span>\n                      <span className=\"font-mono text-2xl font-bold text-foreground\">\n                        {avgReputation.toFixed(1)}\n                        <span className=\"text-sm text-muted-foreground/40\"> / 5</span>\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    {myAgents.map((agent) => {\n                      const key = `${agent.network}:${agent.agentId}`\n                      const rep = reputations[key]\n                      if (!rep || rep.count === 0) return null\n                      return (\n                        <div key={key} className=\"flex items-center justify-between py-2 border-b border-border/40 last:border-0\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"font-mono text-xs uppercase tracking-wider text-foreground\">{agent.name}</span>\n                            <span className=\"font-mono text-[9px] text-muted-foreground/50 border border-border px-1.5 py-0.5\">\n                              {CONTRACTS[agent.network]?.name || agent.network}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-3\">\n                            <span className=\"font-mono text-xs text-muted-foreground\">{rep.count} review{rep.count !== 1 ? \"s\" : \"\"}</span>\n                            <span className=\"font-mono text-xs font-bold text-foreground\">{rep.avg.toFixed(1)}/5</span>\n                          </div>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </>\n              )}\n            </div>\n          </motion.div>\n\n          {/* ═══════════ Section 5: Arena Performance ═══════════ */}\n          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }}>\n            <SectionLabel label=\"Arena Performance\" />\n            <div className=\"border border-border p-5 relative mb-10\">\n              <CornerBrackets />\n              {loadingArena ? (\n                <div className=\"animate-pulse space-y-3\">\n                  <div className=\"h-6 w-32 bg-muted-foreground/10 rounded\" />\n                  <div className=\"h-3 w-full bg-muted-foreground/10 rounded\" />\n                  <div className=\"h-3 w-3/4 bg-muted-foreground/10 rounded\" />\n                </div>\n              ) : myEvents.length === 0 && myLeaderboardEntries.length === 0 ? (\n                <span className=\"font-mono text-xs text-muted-foreground/60 uppercase tracking-widest\">\n                  No arena participation yet\n                </span>\n              ) : (\n                <>\n                  {/* ELO Rankings */}\n                  {myLeaderboardEntries.length > 0 && (\n                    <div className=\"mb-5\">\n                      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3\">\n                        ELO Rankings\n                      </span>\n                      <div className=\"space-y-2\">\n                        {myLeaderboardEntries.map((entry) => (\n                          <div key={`${entry.network}:${entry.agentId}`} className=\"flex items-center justify-between py-2 border-b border-border/40 last:border-0\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"font-mono text-xs font-bold text-foreground\">#{entry.rank}</span>\n                              <span className=\"font-mono text-xs uppercase tracking-wider text-foreground\">{entry.name}</span>\n                            </div>\n                            <div className=\"flex items-center gap-4\">\n                              <span className=\"font-mono text-xs text-info-blue font-bold\">{entry.elo} ELO</span>\n                              <span className=\"font-mono text-[10px] text-system-green\">{entry.wins}W</span>\n                              <span className=\"font-mono text-[10px] text-error-red\">{entry.battles - entry.wins}L</span>\n                              <span className=\"font-mono text-[10px] text-muted-foreground\">{entry.winRate}%</span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Event History */}\n                  {myEvents.length > 0 && (\n                    <div>\n                      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3\">\n                        Event History\n                      </span>\n                      <div className=\"space-y-2\">\n                        {myEvents.slice(0, 10).map((evt) => {\n                          const myParticipant = evt.participants?.find(\n                            (p) => p.ownerAddress?.toLowerCase() === walletAddress?.toLowerCase()\n                          )\n                          const agentKey = myParticipant ? `${myParticipant.network}:${myParticipant.agentId}` : \"\"\n                          const score = agentKey && evt.scores?.[agentKey] ? evt.scores[agentKey] : null\n                          const rank = evt.results?.rankings?.find((r) => r.agentKey === agentKey)\n\n                          return (\n                            <div key={evt.id} className=\"flex items-center justify-between py-2 border-b border-border/40 last:border-0\">\n                              <div className=\"flex items-center gap-2 min-w-0\">\n                                <span className={cn(\"font-mono text-[9px] uppercase tracking-wider px-1.5 py-0.5 border shrink-0\", STATUS_COLORS[evt.status] || STATUS_COLORS.completed)}>\n                                  {evt.status}\n                                </span>\n                                <span className=\"font-mono text-xs text-foreground truncate\">{evt.title}</span>\n                              </div>\n                              <div className=\"flex items-center gap-3 shrink-0\">\n                                {myParticipant && (\n                                  <span className=\"font-mono text-[10px] text-muted-foreground\">{myParticipant.name}</span>\n                                )}\n                                {score && (\n                                  <span className=\"font-mono text-xs text-info-blue\">{score.avgScore?.toFixed(1)} pts</span>\n                                )}\n                                {rank && (\n                                  <span className={cn(\n                                    \"font-mono text-xs font-bold\",\n                                    rank.rank === 1 ? \"text-warning-amber\" : \"text-muted-foreground\"\n                                  )}>\n                                    #{rank.rank}\n                                  </span>\n                                )}\n                              </div>\n                            </div>\n                          )\n                        })}\n                      </div>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </motion.div>\n\n          {/* ═══════════ Section 6: Agents I've Hired ═══════════ */}\n          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }}>\n            <SectionLabel label=\"Agents I've Hired\" />\n            <div className=\"mb-10\">\n              {loadingHires ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {Array.from({ length: 3 }).map((_, i) => <SkeletonCard key={i} />)}\n                </div>\n              ) : hiredAgents.length === 0 ? (\n                <div className=\"border border-border p-8 text-center\">\n                  <span className=\"font-mono text-xs uppercase tracking-widest text-muted-foreground/60\">\n                    No hire history found\n                  </span>\n                  <p className=\"font-mono text-[10px] text-muted-foreground/40 mt-2\">\n                    Hire an agent to see your history here\n                  </p>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {hiredAgents.map((hire, i) => (\n                    <HiredAgentCard key={`hired-${hire.hireId || i}`} hire={hire} />\n                  ))}\n                </div>\n              )}\n            </div>\n          </motion.div>\n\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// ═══════════════════════════════════════════\n// ---- Sub-Components ----\n// ═══════════════════════════════════════════\n\nfunction SectionLabel({ label, count }: { label: string; count?: number }) {\n  return (\n    <div className=\"flex items-center gap-3 mb-4\">\n      <h2 className=\"font-mono text-sm font-bold uppercase tracking-widest text-foreground\">{label}</h2>\n      {count !== undefined && (\n        <span className=\"font-mono text-[10px] text-muted-foreground/50 uppercase tracking-widest\">({count})</span>\n      )}\n      <div className=\"flex-1 h-[1px] bg-border\" />\n    </div>\n  )\n}\n\nfunction StatCard({ label, value, subtext, color, loading }: {\n  label: string\n  value: string\n  subtext?: string\n  color?: string\n  loading?: boolean\n}) {\n  return (\n    <div className=\"border border-border p-5 relative\">\n      <CornerBrackets />\n      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2\">\n        {label}\n      </span>\n      {loading ? (\n        <div className=\"h-8 w-20 bg-muted-foreground/10 animate-pulse rounded\" />\n      ) : (\n        <>\n          <span className={cn(\"font-mono text-2xl md:text-3xl font-bold block\", color || \"text-foreground\")}>\n            {value}\n          </span>\n          {subtext && (\n            <span className=\"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/40 mt-1 block\">\n              {subtext}\n            </span>\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n\nfunction BalanceBar({ name, balance, total }: { name: string; balance: number; total: number }) {\n  const pct = total > 0 ? (balance / total) * 100 : 0\n  return (\n    <div className=\"flex items-center gap-3 py-1.5\">\n      <span className=\"font-mono text-xs uppercase tracking-wider text-foreground w-28 truncate\">{name}</span>\n      <div className=\"flex-1 h-2 bg-muted-foreground/10 relative overflow-hidden\">\n        <div\n          className=\"h-full bg-system-green transition-all duration-700\"\n          style={{ width: `${Math.max(pct, 1)}%` }}\n        />\n      </div>\n      <span className=\"font-mono text-xs text-foreground w-24 text-right\">${balance.toFixed(2)}</span>\n    </div>\n  )\n}\n\nfunction DashboardAgentCard({ agent, balance, reputation, verification, feedbackList, isExpanded, loadingBalance, onToggle, onVerified, signedFetch }: {\n  agent: Agent\n  balance?: number\n  reputation?: { count: number; avg: number }\n  verification?: VerificationResult | null\n  feedbackList?: FeedbackEntry[]\n  isExpanded: boolean\n  loadingBalance: boolean\n  onToggle: () => void\n  onVerified: (v: VerificationResult) => void\n  signedFetch?: ((url: string, init?: RequestInit) => Promise<Response>) | null\n}) {\n  const networkName = CONTRACTS[agent.network]?.name || agent.network\n  const isActive = agent.status === \"active\"\n  const skills = Array.isArray(agent.skills) ? agent.skills : []\n  const hp = parseFloat(agent.hirePrice || \"0\")\n  const [verifying, setVerifying] = useState(false)\n  const [verifyError, setVerifyError] = useState<string | null>(null)\n\n  async function handleVerify() {\n    setVerifying(true)\n    setVerifyError(null)\n    try {\n      const result = await apiVerifyAgent(agent.network, agent.agentId, signedFetch)\n      onVerified(result)\n    } catch (e: unknown) {\n      setVerifyError(e instanceof Error ? e.message : String(e))\n    } finally {\n      setVerifying(false)\n    }\n  }\n\n  return (\n    <div className={cn(\"border p-5 relative transition-colors\", isExpanded ? \"border-foreground/30 col-span-1 md:col-span-2 lg:col-span-3\" : \"border-border hover:border-foreground/20\")}>\n      <CornerBrackets />\n\n      {/* Header - clickable */}\n      <button type=\"button\" onClick={onToggle} className=\"w-full text-left cursor-pointer\">\n        <div className=\"flex items-center gap-2 mb-1.5\">\n          <span className={cn(\"h-2 w-2 rounded-full shrink-0\", isActive ? \"bg-system-green\" : \"bg-error-red\")} />\n          <span className=\"font-mono text-sm font-bold uppercase tracking-wider text-foreground truncate\">{agent.name}</span>\n          {agent.agentId && agent.agentId !== \"pending\" && (\n            <span className=\"font-mono text-[10px] text-muted-foreground/60 shrink-0\">#{agent.agentId}</span>\n          )}\n          {verification && (\n            <span className={cn(\"font-mono text-[8px] uppercase tracking-wider px-1.5 py-0.5 border shrink-0\", TIER_STYLES[verification.riskTier] || \"border-border text-muted-foreground\")}>\n              {verificationLabel(verification.overallScore)}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-2 mb-3\">\n          <span className=\"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border px-1.5 py-0.5\">{networkName}</span>\n          <span className={cn(\"font-mono text-[9px] uppercase tracking-wider\", hp > 0 ? \"text-system-green\" : \"text-muted-foreground/40\")}>\n            {hp > 0 ? `$${hp.toFixed(2)} USDC` : \"FREE\"}\n          </span>\n          <span className=\"flex-1\" />\n          {loadingBalance ? (\n            <span className=\"h-4 w-16 bg-muted-foreground/10 animate-pulse rounded\" />\n          ) : balance !== undefined ? (\n            <span className=\"font-mono text-[10px] font-bold text-system-green\">\n              ${balance.toFixed(2)}\n            </span>\n          ) : null}\n        </div>\n\n        {!isExpanded && agent.description && (\n          <p className=\"font-mono text-[11px] text-muted-foreground leading-relaxed line-clamp-2 mb-3\">{agent.description}</p>\n        )}\n\n        {!isExpanded && skills.length > 0 && (\n          <div className=\"flex flex-wrap gap-1.5\">\n            {skills.slice(0, 3).map((s) => (\n              <span key={s} className=\"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/60 border border-border/60 px-1.5 py-0.5\">{s}</span>\n            ))}\n            {skills.length > 3 && <span className=\"font-mono text-[9px] text-muted-foreground/40\">+{skills.length - 3}</span>}\n          </div>\n        )}\n      </button>\n\n      {/* Expanded detail */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"border-t border-border mt-4 pt-4 space-y-4\">\n              {agent.description && (\n                <div>\n                  <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">Description</span>\n                  <p className=\"font-mono text-[11px] text-muted-foreground leading-relaxed\">{agent.description}</p>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {agent.mcpEndpoint && (\n                  <div>\n                    <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">MCP Endpoint</span>\n                    <span className=\"font-mono text-[11px] text-foreground break-all\">{agent.mcpEndpoint}</span>\n                  </div>\n                )}\n                {agent.a2aEndpoint && (\n                  <div>\n                    <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">A2A Endpoint</span>\n                    <span className=\"font-mono text-[11px] text-foreground break-all\">{agent.a2aEndpoint}</span>\n                  </div>\n                )}\n                {agent.agentWalletAddress && (\n                  <div>\n                    <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">Agent Wallet</span>\n                    <span className=\"font-mono text-[11px] text-foreground\">{agent.agentWalletAddress}</span>\n                  </div>\n                )}\n                {agent.registrationTx && (\n                  <div>\n                    <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-1\">Registration Tx</span>\n                    <span className=\"font-mono text-[11px] text-foreground\">{truncAddr(agent.registrationTx)}</span>\n                  </div>\n                )}\n              </div>\n\n              {/* Skills */}\n              {skills.length > 0 && (\n                <div>\n                  <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2\">Skills</span>\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {skills.map((s) => (\n                      <span key={s} className=\"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/60 border border-border/60 px-1.5 py-0.5\">{s}</span>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Verification */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60\">ERC-8126 Verification</span>\n                  <button\n                    onClick={handleVerify}\n                    disabled={verifying || !agent.agentId || agent.agentId === \"pending\"}\n                    className=\"font-mono text-[10px] uppercase tracking-widest border border-border px-3 py-1.5 hover:border-foreground/30 hover:text-foreground transition-colors text-muted-foreground disabled:opacity-30\"\n                  >\n                    {verifying ? \"Verifying...\" : verification ? \"Re-verify\" : \"Verify Now\"}\n                  </button>\n                </div>\n                {verification ? (\n                  <div className=\"flex items-center gap-4\">\n                    <span className={cn(\"font-mono text-sm font-bold px-3 py-1 border\", TIER_STYLES[verification.riskTier] || \"border-border text-muted-foreground\")}>\n                      {verificationLabel(verification.overallScore)}\n                    </span>\n                    <span className=\"font-mono text-[10px] text-muted-foreground/60\">\n                      {verification.verifiedAt ? new Date(verification.verifiedAt).toLocaleDateString() : \"\"}\n                    </span>\n                  </div>\n                ) : (\n                  <span className=\"font-mono text-[10px] text-muted-foreground/40\">Not yet verified</span>\n                )}\n                {verifyError && (\n                  <div className=\"mt-2 border border-red-500/40 bg-red-500/5 px-3 py-1.5\">\n                    <span className=\"font-mono text-[10px] text-red-500\">{verifyError}</span>\n                  </div>\n                )}\n              </div>\n\n              {/* Reputation */}\n              {reputation && reputation.count > 0 && (\n                <div>\n                  <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2\">Feedback</span>\n                  <div className=\"flex items-center gap-4 mb-3\">\n                    <span className=\"font-mono text-xs text-foreground\">{reputation.count} review{reputation.count !== 1 ? \"s\" : \"\"}</span>\n                    <span className=\"font-mono text-xs font-bold text-foreground\">{reputation.avg.toFixed(1)} / 5</span>\n                  </div>\n\n                  {feedbackList && feedbackList.length > 0 && (\n                    <div className=\"space-y-2\">\n                      {feedbackList.slice(0, 5).map((fb, i) => (\n                        <div key={i} className=\"flex items-center justify-between py-1.5 border-b border-border/30 last:border-0\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"font-mono text-[10px] text-muted-foreground\">{truncAddr(fb.clientAddress)}</span>\n                            {fb.tag1 && <span className=\"font-mono text-[9px] text-muted-foreground/60 border border-border/40 px-1 py-0.5\">{fb.tag1}</span>}\n                            {fb.tag2 && <span className=\"font-mono text-[9px] text-muted-foreground/60 border border-border/40 px-1 py-0.5\">{fb.tag2}</span>}\n                          </div>\n                          <span className={cn(\n                            \"font-mono text-xs font-bold\",\n                            fb.value >= 4 ? \"text-system-green\" : fb.value >= 2 ? \"text-warning-amber\" : \"text-error-red\"\n                          )}>\n                            {fb.value}/5\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {feedbackList === undefined && (\n                    <div className=\"h-3 w-32 bg-muted-foreground/10 animate-pulse rounded\" />\n                  )}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n\nfunction HiredAgentCard({ hire }: { hire: DashboardHire }) {\n  const router = useRouter()\n  const networkName = CONTRACTS[hire.network]?.name || hire.network\n  const agentName = hire.agent?.name || `Agent #${hire.agentId}`\n  const callsUsed = Number(hire.callsUsed) || 0\n  const callsTotal = Number(hire.callsTotal) || 1\n  const usagePercent = Math.min(100, (callsUsed / callsTotal) * 100)\n  const pricePaid = parseFloat(hire.pricePaid || \"0\")\n  const isActive = hire.status === \"active\"\n  const isExpired = hire.status === \"expired\"\n  const isExhausted = hire.status === \"exhausted\"\n  const expiresAt = hire.expiresAt ? new Date(hire.expiresAt).toLocaleDateString() : \"\"\n\n  const statusLabel = isActive ? \"ACTIVE\" : isExpired ? \"EXPIRED\" : isExhausted ? \"EXHAUSTED\" : hire.status?.toUpperCase() || \"\"\n  const statusColor = isActive ? \"text-system-green border-system-green/40\" : isExhausted ? \"text-warning-amber border-warning-amber/40\" : \"text-error-red border-error-red/40\"\n\n  return (\n    <div className=\"border border-border p-5 relative\">\n      <CornerBrackets />\n      <div className=\"flex items-center gap-2 mb-1.5\">\n        <span className=\"font-mono text-sm font-bold uppercase tracking-wider text-foreground truncate\">{agentName}</span>\n        <span className=\"font-mono text-[10px] text-muted-foreground/60 shrink-0\">#{hire.agentId}</span>\n      </div>\n\n      <div className=\"flex items-center gap-2 mb-3\">\n        <span className=\"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50 border border-border px-1.5 py-0.5\">{networkName}</span>\n        <span className={cn(\"font-mono text-[9px] uppercase tracking-wider px-1.5 py-0.5 border\", statusColor)}>\n          {statusLabel}\n        </span>\n        <span className=\"font-mono text-[9px] uppercase tracking-wider text-info-blue\">\n          {hire.plan}\n        </span>\n      </div>\n\n      {/* Usage bar */}\n      <div className=\"mb-3\">\n        <div className=\"flex items-center justify-between mb-1\">\n          <span className=\"font-mono text-[9px] text-muted-foreground/50\">{callsUsed} / {callsTotal} calls</span>\n          <span className={cn(\"font-mono text-[9px]\", usagePercent > 90 ? \"text-error-red\" : usagePercent > 70 ? \"text-warning-amber\" : \"text-system-green\")}>\n            {usagePercent.toFixed(0)}%\n          </span>\n        </div>\n        <div className=\"w-full h-1.5 bg-muted-foreground/10 overflow-hidden\">\n          <div\n            className={cn(\"h-full transition-all\", usagePercent > 90 ? \"bg-error-red\" : usagePercent > 70 ? \"bg-warning-amber\" : \"bg-system-green\")}\n            style={{ width: `${usagePercent}%` }}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-3\">\n        <span className=\"font-mono text-[9px] text-muted-foreground/40\">Paid ${pricePaid.toFixed(2)} USDC</span>\n        {expiresAt && <span className=\"font-mono text-[9px] text-muted-foreground/40\">Expires {expiresAt}</span>}\n      </div>\n\n      {/* Action buttons */}\n      <div className=\"flex items-center gap-2 pt-3 border-t border-border/40\">\n        {isActive && (\n          <button\n            onClick={() => router.push(`/workspace?network=${hire.network}&agentId=${hire.agentId}&hireId=${hire.hireId}`)}\n            className=\"flex-1 font-mono text-[10px] uppercase tracking-widest py-1.5 border border-system-green/40 text-system-green hover:bg-system-green/5 transition-colors text-center\"\n          >\n            OPEN WORKSPACE\n          </button>\n        )}\n        {(isExpired || isExhausted) && (\n          <button\n            onClick={() => router.push(`/hire?network=${hire.network}&agentId=${hire.agentId}`)}\n            className=\"flex-1 font-mono text-[10px] uppercase tracking-widest py-1.5 border border-warning-amber/40 text-warning-amber hover:bg-warning-amber/5 transition-colors text-center\"\n          >\n            RENEW\n          </button>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction WithdrawSection({ agents, balances, walletAddress, onBalanceUpdate }: {\n  agents: Agent[]\n  balances: Record<string, number>\n  walletAddress: string\n  onBalanceUpdate: (key: string, newBal: number) => void\n}) {\n  const { signer } = useWallet()\n  const [withdrawingAgent, setWithdrawingAgent] = useState<string | null>(null)\n  const [withdrawAmount, setWithdrawAmount] = useState(\"\")\n  const [withdrawStatus, setWithdrawStatus] = useState<string | null>(null)\n  const [withdrawError, setWithdrawError] = useState<string | null>(null)\n\n  const agentsWithBalance = agents.filter((a) => {\n    const key = `${a.network}:${a.agentId}`\n    return (balances[key] || 0) > 0 && a.agentWalletAddress\n  })\n\n  async function handleWithdraw(agent: Agent) {\n    const key = `${agent.network}:${agent.agentId}`\n    const bal = balances[key] || 0\n    const amount = parseFloat(withdrawAmount) || bal\n\n    if (amount <= 0 || amount > bal) {\n      setWithdrawError(\"Invalid amount\")\n      return\n    }\n\n    setWithdrawStatus(\"Sign the withdrawal request...\")\n    setWithdrawError(null)\n\n    try {\n      // Sign a message to prove ownership of the wallet\n      if (!signer) throw new Error(\"Wallet not connected\")\n      const withdrawMessage = `Withdraw ${amount} USDC from agent ${agent.agentId} to ${walletAddress}`\n      const signature = await signer.signMessage(withdrawMessage)\n\n      setWithdrawStatus(\"Submitting withdrawal...\")\n\n      const result = await apiWithdraw({\n        agentId: agent.agentId,\n        network: \"fuji\",\n        toAddress: walletAddress,\n        amount: amount.toString(),\n        ownerAddress: walletAddress,\n        usdcAddress: USDC_ADDRESS,\n        message: withdrawMessage,\n        signature,\n      })\n\n      // Poll for confirmation if circleTxId returned\n      if (result.circleTxId) {\n        setWithdrawStatus(\"Waiting for Circle confirmation...\")\n        let confirmed = false\n        for (let i = 0; i < 30; i++) {\n          await new Promise(r => setTimeout(r, 3000))\n          try {\n            const status = await apiWithdrawStatus(result.circleTxId)\n            if (status.status === \"CONFIRMED\") {\n              setWithdrawStatus(`Withdraw successful!${status.txHash ? ` TX: ${status.txHash.slice(0, 10)}...` : \"\"}`)\n              confirmed = true\n              break\n            }\n            if (status.status === \"FAILED\" || status.status === \"DENIED\" || status.status === \"CANCELLED\") {\n              throw new Error(`Transaction ${status.status.toLowerCase()}`)\n            }\n          } catch { /* keep polling */ }\n        }\n        if (!confirmed) {\n          setWithdrawStatus(\"Withdrawal submitted — check Circle dashboard for confirmation.\")\n        }\n      } else {\n        setWithdrawStatus(\"Withdrawal submitted!\")\n      }\n\n      onBalanceUpdate(key, Math.max(0, bal - amount))\n      setWithdrawingAgent(null)\n      setWithdrawAmount(\"\")\n\n      setTimeout(() => setWithdrawStatus(null), 5000)\n    } catch (e: unknown) {\n      setWithdrawError(e instanceof Error ? e.message : String(e))\n      setWithdrawStatus(null)\n    }\n  }\n\n  return (\n    <div className=\"border-t border-border pt-4\">\n      <span className=\"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3\">\n        Withdraw\n      </span>\n\n      {agentsWithBalance.length === 0 ? (\n        <span className=\"font-mono text-[10px] text-muted-foreground/40\">No agents with balance to withdraw</span>\n      ) : (\n        <div className=\"space-y-2\">\n          {agentsWithBalance.map((agent) => {\n            const key = `${agent.network}:${agent.agentId}`\n            const bal = balances[key] || 0\n            const isOpen = withdrawingAgent === key\n\n            return (\n              <div key={key} className=\"border border-border/60 p-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-mono text-xs uppercase tracking-wider text-foreground\">{agent.name}</span>\n                    <span className=\"font-mono text-xs font-bold text-system-green\">${bal.toFixed(2)}</span>\n                  </div>\n                  <button\n                    onClick={() => {\n                      setWithdrawingAgent(isOpen ? null : key)\n                      setWithdrawAmount(bal.toString())\n                      setWithdrawError(null)\n                    }}\n                    className=\"font-mono text-[10px] uppercase tracking-widest px-3 py-1 border border-border hover:border-foreground/30 text-muted-foreground hover:text-foreground transition-colors\"\n                  >\n                    {isOpen ? \"CANCEL\" : \"WITHDRAW\"}\n                  </button>\n                </div>\n\n                {isOpen && (\n                  <div className=\"mt-3 pt-3 border-t border-border/40 space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"number\"\n                        value={withdrawAmount}\n                        onChange={(e) => setWithdrawAmount(e.target.value)}\n                        placeholder=\"Amount\"\n                        step=\"0.01\"\n                        max={bal}\n                        className=\"flex-1 bg-transparent border border-border px-3 py-2 font-mono text-xs text-foreground placeholder:text-muted-foreground/30 focus:outline-none focus:border-foreground/40\"\n                      />\n                      <button\n                        onClick={() => setWithdrawAmount(bal.toString())}\n                        className=\"font-mono text-[9px] uppercase tracking-wider px-2 py-2 border border-border text-muted-foreground hover:text-foreground\"\n                      >\n                        MAX\n                      </button>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-mono text-[9px] text-muted-foreground/50\">To: {walletAddress.slice(0, 6)}...{walletAddress.slice(-4)}</span>\n                    </div>\n                    <button\n                      onClick={() => handleWithdraw(agent)}\n                      className=\"w-full font-mono text-[10px] uppercase tracking-widest py-2 bg-foreground text-background hover:opacity-90 transition-opacity\"\n                    >\n                      CONFIRM WITHDRAW\n                    </button>\n                  </div>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      )}\n\n      {withdrawStatus && (\n        <div className=\"mt-3 border border-system-green/30 bg-system-green/5 px-3 py-2\">\n          <span className=\"font-mono text-[10px] text-system-green\">{withdrawStatus}</span>\n        </div>\n      )}\n\n      {withdrawError && (\n        <div className=\"mt-3 border border-error-red/30 bg-error-red/5 px-3 py-2\">\n          <span className=\"font-mono text-[10px] text-error-red\">{withdrawError}</span>\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction SkeletonCard() {\n  return (\n    <div className=\"border border-border p-5 relative animate-pulse\">\n      <CornerBrackets opacity={10} />\n      <div className=\"h-4 w-2/3 bg-muted-foreground/10 rounded mb-3\" />\n      <div className=\"h-3 w-1/3 bg-muted-foreground/10 rounded mb-4\" />\n      <div className=\"h-3 w-full bg-muted-foreground/10 rounded mb-2\" />\n      <div className=\"h-3 w-4/5 bg-muted-foreground/10 rounded mb-4\" />\n      <div className=\"flex gap-2\">\n        <div className=\"h-5 w-16 bg-muted-foreground/10 rounded\" />\n        <div className=\"h-5 w-16 bg-muted-foreground/10 rounded\" />\n      </div>\n    </div>\n  )\n}\n","import { ethers } from 'ethers'\nimport { CONTRACTS, REPUTATION_REGISTRY_ABI, USDC_ADDRESS, USDC_ABI } from './deploy-constants'\n\n// ---- Types ----\nexport interface FeedbackEntry {\n  clientAddress: string\n  index: number\n  value: number\n  tag1: string\n  tag2: string\n}\n\n// ---- Fetch USDC balance for a single agent wallet (on Fuji) ----\nexport async function fetchAgentUsdcBalance(agentWalletAddress: string): Promise<number> {\n  if (!agentWalletAddress || agentWalletAddress === '') return 0\n  try {\n    const provider = new ethers.JsonRpcProvider(CONTRACTS.fuji.rpc)\n    const usdc = new ethers.Contract(USDC_ADDRESS, USDC_ABI, provider)\n    const raw = await usdc.balanceOf(agentWalletAddress)\n    return Number(raw) / 1e6\n  } catch {\n    return 0\n  }\n}\n\n// ---- Fetch reputation summary for an agent on one network ----\nexport async function fetchAgentReputation(\n  network: string,\n  agentId: string\n): Promise<{ count: number; avg: number }> {\n  const netConfig = CONTRACTS[network]\n  if (!netConfig || !agentId || agentId === 'pending') return { count: 0, avg: 0 }\n\n  try {\n    const provider = new ethers.JsonRpcProvider(netConfig.rpc)\n    const contract = new ethers.Contract(\n      netConfig.reputationRegistry,\n      REPUTATION_REGISTRY_ABI,\n      provider\n    )\n    const clients: string[] = await contract.getClients(agentId)\n    if (clients.length === 0) return { count: 0, avg: 0 }\n\n    const [count, summaryValue, summaryDecimals] = await contract.getSummary(\n      agentId,\n      clients,\n      '',\n      ''\n    )\n    const countNum = Number(count)\n    const avg =\n      countNum > 0 ? Number(summaryValue) / Math.pow(10, Number(summaryDecimals)) : 0\n    return { count: countNum, avg }\n  } catch {\n    return { count: 0, avg: 0 }\n  }\n}\n\n// ---- Fetch detailed feedback entries for an agent ----\nexport async function fetchAgentFeedbacks(\n  network: string,\n  agentId: string\n): Promise<FeedbackEntry[]> {\n  const netConfig = CONTRACTS[network]\n  if (!netConfig || !agentId || agentId === 'pending') return []\n\n  try {\n    const provider = new ethers.JsonRpcProvider(netConfig.rpc)\n    const contract = new ethers.Contract(\n      netConfig.reputationRegistry,\n      REPUTATION_REGISTRY_ABI,\n      provider\n    )\n    const clients: string[] = await contract.getClients(agentId)\n    const entries: FeedbackEntry[] = []\n\n    for (const client of clients) {\n      const lastIndex = Number(await contract.getLastIndex(agentId, client))\n      for (let i = 1; i <= lastIndex; i++) {\n        try {\n          const [value, , tag1, tag2, isRevoked] = await contract.readFeedback(\n            agentId,\n            client,\n            i\n          )\n          if (!isRevoked) {\n            entries.push({\n              clientAddress: client,\n              index: i,\n              value: Number(value),\n              tag1,\n              tag2,\n            })\n          }\n        } catch {\n          /* skip failed reads */\n        }\n      }\n    }\n    return entries\n  } catch {\n    return []\n  }\n}\n"],"names":[],"mappings":"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"}