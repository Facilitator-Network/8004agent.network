(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54858,4319,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_BASE||"https://agent-cli-backend.onrender.com";async function a(e,a,n){let r=n||fetch,s=await r(`${t}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),i=await s.json().catch(()=>({}));if(!s.ok)throw Error(i.error||s.statusText||`HTTP ${s.status}`);return i}async function n(e,a){let n=a||fetch,r=await n(`${t}${e}`),s=await r.json().catch(()=>({}));if(!r.ok)throw Error(s.error||r.statusText||`HTTP ${r.status}`);return s}async function r(e,t){let a=new URLSearchParams;return e&&a.set("name",e),t&&a.set("url",t),n(`/api/agents/check?${a.toString()}`)}async function s(e){return a("/api/circle/create-wallet",{agentId:e})}async function i(){return n("/api/agents")}async function o(e,t){return n(`/api/agents/${e}/${t}`)}async function c(e){let t=e?`?status=${e}`:"";return n(`/api/arena/events${t}`)}async function l(e){return n(`/api/arena/events/${e}`)}async function d(e,t){return a("/api/arena/events",e,t)}async function u(e,t,n){return a(`/api/arena/events/${e}/register`,t,n)}async function p(e,t,n){return a(`/api/arena/events/${e}/status`,t,n)}async function m(e,t,n){return a(`/api/arena/events/${e}/vote`,t,n)}async function x(e,t,n){return a(`/api/arena/events/${e}/judge`,t,n)}async function f(e,t,n){return a(`/api/arena/events/${e}/distribute`,t,n)}async function g(e){return n(`/api/arena/admin-check?address=${e}`)}async function h(){return n("/api/arena/leaderboard")}async function b(e,t,n){return a(`/api/verify/${e}/${t}`,{},n)}async function y(e,t){return n(`/api/verify/${e}/${t}`)}async function v(e,t){return a("/api/agents",e,t)}async function w(e,t){return n(`/api/hire/plans/${e}/${t}`)}async function N(e){return a("/api/bridge/initiate",e)}async function j(e){return a("/api/hire",e)}async function k(e){return n(`/api/hire/my/${e}`)}async function A(e){return n(`/api/hire/status/${e}`)}async function S(e,t,a){return n(`/api/hire/active/${e}/${t}/${a}`)}async function I(e,t,n){return a("/api/workspace/call",{hireId:e,message:t,files:n})}async function C(e){return n(`/api/workspace/history/${e}`)}async function E(e){return a(`/api/workspace/clear/${e}`,{})}async function T(e,t){return a("/api/circle/withdraw",e,t)}async function R(e){return n(`/api/circle/withdraw-status/${e}`)}e.s(["API_BASE",0,t,"APPLICATION_DOMAINS",0,{Technology:["Technology","Software Engineering","DevOps","Data Science","Blockchain","DeFi","Cybersecurity","Cloud Computing"],"Finance & Business":["Finance & Business","Finance","Banking"],Healthcare:["Healthcare","Telemedicine","Healthcare Informatics"],Education:["Education","E-Learning"]},"CHAIN_USDC",0,{sepolia:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",baseSepolia:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",fuji:"0x5425890298aed601595a70AB815c96711a31Bc65",arbitrumSepolia:"0x75faf114eafb1BDbe2F0316DF893fd58CE46AA4d",monadTestnet:"0x534b2f3A21130d7a60830c2Df862319e593943A3"},"CONTRACTS",0,{sepolia:{name:"Ethereum Sepolia",rpc:"https://ethereum-sepolia-rpc.publicnode.com",chainId:0xaa36a7,chainIdHex:"0xaa36a7",blockExplorer:"https://sepolia.etherscan.io",identityRegistry:"0x8004A818BFB912233c491871b3d84c89A494BD9e",reputationRegistry:"0x8004B663056A597Dffe9eCcC1965A193B7388713",verificationRegistry:"0xA4Bc25c1715c073202783699ea934b169c19b3C2",facinetNetwork:"ethereum-sepolia"},baseSepolia:{name:"Base Sepolia",rpc:"https://sepolia.base.org",chainId:84532,chainIdHex:"0x14a34",blockExplorer:"https://sepolia.basescan.org",identityRegistry:"0x8004A818BFB912233c491871b3d84c89A494BD9e",reputationRegistry:"0x8004B663056A597Dffe9eCcC1965A193B7388713",verificationRegistry:"0x817FCea8d1AcdABe280A39F31feAaf635D740491",facinetNetwork:"base-sepolia"},fuji:{name:"Avalanche Fuji",rpc:"https://api.avax-test.network/ext/bc/C/rpc",chainId:43113,chainIdHex:"0xa869",blockExplorer:"https://testnet.snowtrace.io",identityRegistry:"0x8004A818BFB912233c491871b3d84c89A494BD9e",reputationRegistry:"0x8004B663056A597Dffe9eCcC1965A193B7388713",verificationRegistry:"0x82b50Dd0729D1b109522f6b4D9B13Aa438aF63D0",facinetNetwork:"avalanche-fuji"},arbitrumSepolia:{name:"Arbitrum Sepolia",rpc:"https://sepolia-rollup.arbitrum.io/rpc",chainId:421614,chainIdHex:"0x66eee",blockExplorer:"https://sepolia.arbiscan.io",identityRegistry:"0x8004A818BFB912233c491871b3d84c89A494BD9e",reputationRegistry:"0x8004B663056A597Dffe9eCcC1965A193B7388713",verificationRegistry:"0x388166fb3B38aFa179B76444d742A329b78B4FF4",facinetNetwork:"arbitrum-sepolia"},monadTestnet:{name:"Monad Testnet",rpc:"https://testnet-rpc.monad.xyz",chainId:10143,chainIdHex:"0x279f",blockExplorer:"https://testnet.monadexplorer.com",identityRegistry:"0x8004A818BFB912233c491871b3d84c89A494BD9e",reputationRegistry:"0x8004B663056A597Dffe9eCcC1965A193B7388713",verificationRegistry:"0x6166809DCFaD786C0f18d8d97be3729b83cb2775",facinetNetwork:"monad-testnet"}},"DEFAULT_FORM_DATA",0,{name:"",url:"",imageUrl:"",description:"",version:"1.0.0",author:"",license:"MIT",mcpEndpoint:"",a2aEndpoint:"",skills:[],customSkills:"",domains:[],customDomains:"",metadataStorage:"on-chain",trustModels:[],x402Payment:!0,activationStatus:"active",hirePrice:"0"},"IDENTITY_REGISTRY_ABI",0,[{inputs:[{name:"agentURI",type:"string"}],name:"register",outputs:[{name:"agentId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"tokenId",type:"uint256"},{name:"uri",type:"string"}],name:"setAgentURI",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"agentId",type:"uint256"},{indexed:!1,name:"agentURI",type:"string"},{indexed:!0,name:"owner",type:"address"}],name:"Registered",type:"event"}],"OASF_SKILLS",0,{"Natural Language Processing":["Natural Language Processing","Summarization","Question Answering","Sentiment Analysis","Translation","Named Entity Recognition","Storytelling"],"Images & Computer Vision":["Computer Vision","Image Generation","Image Classification","Object Detection"],"Multi Modal":["Speech Recognition","Text-to-Speech","Text to Image","Image to Text"],"Analytical Skills":["Code Generation","Code Optimization","Math Problem Solving"],"Data Engineering":["Data Analysis","Database Query","API Integration"]},"PAYMENT_CHAINS",0,[{key:"fuji",label:"Avalanche Fuji (Direct)",cctp:!1},{key:"sepolia",label:"Ethereum Sepolia",cctp:!0},{key:"baseSepolia",label:"Base Sepolia",cctp:!0},{key:"arbitrumSepolia",label:"Arbitrum Sepolia",cctp:!0}],"REPUTATION_REGISTRY_ABI",0,[{inputs:[{name:"agentId",type:"uint256"},{name:"value",type:"int128"},{name:"valueDecimals",type:"uint8"},{name:"tag1",type:"string"},{name:"tag2",type:"string"},{name:"endpoint",type:"string"},{name:"feedbackURI",type:"string"},{name:"feedbackHash",type:"bytes32"}],name:"giveFeedback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"agentId",type:"uint256"}],name:"getClients",outputs:[{name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"agentId",type:"uint256"},{name:"clientAddress",type:"address"}],name:"getLastIndex",outputs:[{name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{name:"agentId",type:"uint256"},{name:"clientAddress",type:"address"},{name:"feedbackIndex",type:"uint64"}],name:"readFeedback",outputs:[{name:"value",type:"int128"},{name:"valueDecimals",type:"uint8"},{name:"tag1",type:"string"},{name:"tag2",type:"string"},{name:"isRevoked",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"agentId",type:"uint256"},{name:"clientAddresses",type:"address[]"},{name:"tag1",type:"string"},{name:"tag2",type:"string"}],name:"getSummary",outputs:[{name:"count",type:"uint64"},{name:"summaryValue",type:"int128"},{name:"summaryValueDecimals",type:"uint8"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"agentId",type:"uint256"},{indexed:!0,name:"clientAddress",type:"address"},{indexed:!1,name:"feedbackIndex",type:"uint64"},{indexed:!1,name:"value",type:"int128"},{indexed:!1,name:"valueDecimals",type:"uint8"},{indexed:!0,name:"indexedTag1",type:"string"},{indexed:!1,name:"tag1",type:"string"},{indexed:!1,name:"tag2",type:"string"},{indexed:!1,name:"endpoint",type:"string"},{indexed:!1,name:"feedbackURI",type:"string"},{indexed:!1,name:"feedbackHash",type:"bytes32"}],name:"NewFeedback",type:"event"}],"TRUST_MODELS",0,[{name:"Reputation-Based",value:"reputation"},{name:"Crypto-Economic (Staking)",value:"crypto-economic"},{name:"TEE Attestation",value:"tee-attestation"}],"USDC_ABI",0,[{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],"USDC_ADDRESS",0,"0x5425890298aed601595a70AB815c96711a31Bc65","USDC_DECIMALS",0,6],4319),e.s(["apiBridgeInitiate",()=>N,"apiCheckActiveHire",()=>S,"apiCheckAdmin",()=>g,"apiCheckAgent",()=>r,"apiCreateCircleWallet",()=>s,"apiCreateEvent",()=>d,"apiDistributePrizes",()=>f,"apiGetAgent",()=>o,"apiGetEvent",()=>l,"apiGetHireStatus",()=>A,"apiGetLeaderboard",()=>h,"apiGetMyHires",()=>k,"apiGetPlans",()=>w,"apiGetVerification",()=>y,"apiJudgeEvent",()=>x,"apiListAgents",()=>i,"apiListEvents",()=>c,"apiRecordHire",()=>j,"apiRegisterForEvent",()=>u,"apiStoreAgent",()=>v,"apiUpdateEventStatus",()=>p,"apiVerifyAgent",()=>b,"apiVoteEvent",()=>m,"apiWithdraw",()=>T,"apiWithdrawStatus",()=>R,"apiWorkspaceCall",()=>I,"apiWorkspaceClear",()=>E,"apiWorkspaceHistory",()=>C],54858)},43363,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_FACINET_API||"https://facinet.vercel.app";async function a(e,a){let n=await fetch(`${t}/api/facilitator/list?network=${encodeURIComponent(e)}&chainId=${a}`,{headers:{"User-Agent":"Facinet-Web/1.0"}}),r=await n.json();return r.success&&Array.isArray(r.facilitators)?r.facilitators.filter(t=>"active"===t.status&&(!t.network||t.network===e)&&(void 0===t.chainId||t.chainId===a)&&(!!t.network||void 0!==t.chainId)):[]}async function n(e){let t=await a(e.network,e.chainId);if(0===t.length)throw Error(`No active facilitators for ${e.network} (chainId ${e.chainId}). Check https://facinet.vercel.app for available facilitators.`);let n=t[Math.floor(Math.random()*t.length)];return{id:n.id,name:n.name||`Facilitator ${n.id.slice(0,8)}`,wallet:n.facilitatorWallet}}async function r(e,a,n){if(!a.contractAddress||!a.functionName)throw Error("contractAddress and functionName are required");if(!a.abi||0===a.abi.length)throw Error("ABI is required for contract execution");let r={facilitatorId:n.id,network:e.network,chainId:e.chainId,contractAddress:a.contractAddress,functionName:a.functionName,functionArgs:a.functionArgs,abi:a.abi},s=await fetch(`${t}/api/x402/execute-contract`,{method:"POST",headers:{"Content-Type":"application/json","X-Network":e.network,"X-Chain-Id":e.chainId.toString()},body:JSON.stringify(r)}),i=await s.json().catch(()=>({}));if(!s.ok||!i.success)throw Error(i.error||i.message||i.reason||`Execute failed (HTTP ${s.status})`);return{success:!0,txHash:i.txHash,facilitator:{id:n.id,name:n.name,wallet:n.wallet},contract:{address:a.contractAddress,functionName:a.functionName,network:e.network},gasUsed:i.gasUsed,gasSpent:i.gasSpent}}e.s(["facinetExecuteContract",()=>r,"selectFacilitator",()=>n])},86752,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(18566),r=e.i(46932),s=e.i(88653),i=e.i(47163),o=e.i(54858),c=e.i(4319),l=e.i(43363),d=e.i(54238),u=e.i(37799);function p({opacity:e=20}){let a=`border-foreground/${e}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`absolute top-2 left-2 w-3 h-3 border-t border-l ${a}`}),(0,t.jsx)("div",{className:`absolute top-2 right-2 w-3 h-3 border-t border-r ${a}`}),(0,t.jsx)("div",{className:`absolute bottom-2 left-2 w-3 h-3 border-b border-l ${a}`}),(0,t.jsx)("div",{className:`absolute bottom-2 right-2 w-3 h-3 border-b border-r ${a}`})]})}function m(){let e=(0,n.useSearchParams)(),l=(0,n.useRouter)(),{walletAddress:d,connect:m,isConnecting:f}=(0,u.useWallet)(),g=e.get("network")||"",h=e.get("agentId")||"",b=e.get("hireId"),[y,v]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),[j,k]=(0,a.useState)(b),[A,S]=(0,a.useState)([]),[I,C]=(0,a.useState)(""),[E,T]=(0,a.useState)([]),[R,B]=(0,a.useState)(!1),[D,$]=(0,a.useState)(!0),[F,P]=(0,a.useState)(null),[H,U]=(0,a.useState)(0),[M,O]=(0,a.useState)(0),_=(0,a.useRef)(null),L=(0,a.useRef)(null),G=(0,a.useRef)(null),W=(0,a.useCallback)(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[]);async function Y(){if(!j||!I.trim()||R)return;let e=I.trim(),t=E.length>0?[...E]:void 0,a={role:"user",text:e,timestamp:new Date().toISOString(),hasFiles:!!t};S(e=>[...e,a]),C(""),T([]),B(!0),P(null),G.current&&(G.current.style.height="auto");try{let a=await (0,o.apiWorkspaceCall)(j,e,t),n={role:"agent",text:a.response||"(No response)",timestamp:new Date().toISOString()};S(e=>[...e,n]),U(a.callsUsed),O(a.callsTotal)}catch(t){let e=t instanceof Error?t.message:"Failed to send message";P(e),S(t=>[...t,{role:"agent",text:`Error: ${e}`,timestamp:new Date().toISOString()}])}finally{B(!1)}}async function V(){if(j)try{await (0,o.apiWorkspaceClear)(j),S([])}catch{}}if((0,a.useEffect)(()=>{W()},[A,W]),(0,a.useEffect)(()=>{g&&h?async function(){try{let e=await (0,o.apiGetAgent)(g,h);v(e);let t=b;if(!t&&d){let e=await (0,o.apiCheckActiveHire)(d,g,h);e.active&&e.hire&&(t=e.hire.hireId)}if(t){k(t);let e=await (0,o.apiGetHireStatus)(t);N(e),U(Number(e.callsUsed)||0),O(Number(e.callsTotal)||0);let a=await (0,o.apiWorkspaceHistory)(t);if(a.history&&a.history.length>0){let e=[];for(let t of a.history)e.push({role:"user",text:t.userMessage,timestamp:t.timestamp,hasFiles:t.hasFiles}),e.push({role:"agent",text:t.agentResponse,timestamp:t.timestamp});S(e)}}}catch(e){P(e instanceof Error?e.message:"Failed to load workspace")}finally{$(!1)}}():$(!1)},[g,h,b,d]),!g||!h)return(0,t.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center",children:(0,t.jsx)("div",{className:"border border-error-red/40 bg-error-red/5 px-6 py-4",children:(0,t.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:"Missing network or agentId parameter"})})})});if(D)return(0,t.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 w-48 bg-muted-foreground/10 rounded"}),(0,t.jsx)("div",{className:"h-24 bg-muted-foreground/10 rounded"}),(0,t.jsx)("div",{className:"flex-1 h-64 bg-muted-foreground/10 rounded"})]})})});if(!d)return(0,t.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"border border-border p-8 relative text-center max-w-md",children:[(0,t.jsx)(p,{}),(0,t.jsx)("h2",{className:"font-mono text-lg font-bold uppercase tracking-wider text-foreground mb-2",children:"CONNECT WALLET"}),(0,t.jsx)("p",{className:"font-mono text-xs text-muted-foreground mb-6",children:"Connect your wallet to access the workspace"}),(0,t.jsx)("button",{onClick:m,disabled:f,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 disabled:opacity-30",children:f?"CONNECTING...":"CONNECT"})]})})});if(!j||!w&&!D)return(0,t.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"border border-border p-8 relative text-center max-w-md",children:[(0,t.jsx)(p,{}),(0,t.jsx)("h2",{className:"font-mono text-lg font-bold uppercase tracking-wider text-foreground mb-2",children:"NO ACTIVE HIRE"}),(0,t.jsx)("p",{className:"font-mono text-xs text-muted-foreground mb-6",children:"You need to hire this agent before using the workspace"}),(0,t.jsx)("button",{onClick:()=>l.push(`/hire?network=${g}&agentId=${h}`),className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90",children:"HIRE AGENT"})]})})});let z=w&&new Date(w.expiresAt)<new Date,K=H>=M,J=!R&&!z&&!K&&w?.status==="active",X=Math.max(0,M-H),q=M>0?Math.min(100,H/M*100):0,Q=c.CONTRACTS[g]?.name||g,Z=y?.a2aEndpoint?"A2A":y?.mcpEndpoint?"MCP":"HTTP";return(0,t.jsxs)("div",{className:"h-[calc(100vh-64px)] w-full relative flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"border-b border-border px-4 md:px-8 py-3 flex-shrink-0",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("button",{onClick:()=>l.back(),className:"font-mono text-xs uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors flex-shrink-0",children:"â†"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,i.cn)("h-2 w-2 rounded-full flex-shrink-0",y?.status==="active"?"bg-system-green":"bg-error-red")}),(0,t.jsx)("span",{className:"font-mono text-sm font-bold uppercase tracking-wider text-foreground truncate",children:y?.name||"Agent"}),(0,t.jsxs)("span",{className:"font-mono text-[9px] text-muted-foreground/50 flex-shrink-0",children:["#",h]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,t.jsx)("span",{className:"font-mono text-[8px] uppercase tracking-wider text-muted-foreground/40",children:Q}),(0,t.jsx)("span",{className:"font-mono text-[8px] uppercase tracking-wider text-info-blue/60",children:Z})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"hidden sm:flex flex-col items-end gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-mono text-[9px] uppercase tracking-wider text-muted-foreground/50",children:[X.toLocaleString()," calls left"]}),(0,t.jsxs)("span",{className:(0,i.cn)("font-mono text-[9px] uppercase tracking-wider",q>90?"text-error-red":q>70?"text-warning-amber":"text-system-green"),children:[q.toFixed(0),"%"]})]}),(0,t.jsx)("div",{className:"w-32 h-1 bg-muted-foreground/10 overflow-hidden",children:(0,t.jsx)("div",{className:(0,i.cn)("h-full transition-all",q>90?"bg-error-red":q>70?"bg-warning-amber":"bg-system-green"),style:{width:`${q}%`}})})]}),(0,t.jsx)("button",{onClick:V,className:"font-mono text-[9px] uppercase tracking-widest px-3 py-1.5 border border-border hover:border-foreground/30 text-muted-foreground hover:text-foreground transition-colors",title:"Clear conversation",children:"NEW CHAT"})]})]})}),(z||K)&&(0,t.jsx)("div",{className:"border-b border-error-red/30 bg-error-red/5 px-4 py-2 flex-shrink-0",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-error-red",children:z?"Hire expired":"No calls remaining"}),(0,t.jsx)("button",{onClick:()=>l.push(`/hire?network=${g}&agentId=${h}`),className:"font-mono text-[9px] uppercase tracking-widest px-3 py-1 bg-error-red/10 border border-error-red/30 text-error-red hover:bg-error-red/20 transition-colors",children:"RENEW"})]}),(0,t.jsx)(x,{agent:y,network:g,agentId:h})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto no-scrollbar px-4 md:px-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto py-6 space-y-1",children:[0===A.length?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center pt-24 pb-16",children:(0,t.jsxs)("div",{className:"border border-border/40 p-8 relative text-center max-w-md",children:[(0,t.jsx)(p,{opacity:10}),(0,t.jsx)("div",{className:"font-mono text-3xl text-foreground/10 mb-4",children:">_"}),(0,t.jsx)("h3",{className:"font-mono text-sm font-bold uppercase tracking-widest text-foreground/40 mb-2",children:"WORKSPACE READY"}),(0,t.jsxs)("p",{className:"font-mono text-[10px] text-muted-foreground/40 leading-relaxed",children:["Send a message to start interacting with"," ",(0,t.jsx)("span",{className:"text-foreground/60",children:y?.name||"this agent"}),". You can also attach files for the agent to process."]})]})}):(0,t.jsx)(s.AnimatePresence,{initial:!1,children:A.map((e,a)=>(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.15},className:(0,i.cn)("py-4",a>0&&A[a-1].role!==e.role?"border-t border-border/20":""),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:(0,i.cn)("font-mono text-[9px] uppercase tracking-widest font-bold","user"===e.role?"text-info-blue":"text-system-green"),children:"user"===e.role?"YOU":y?.name?.toUpperCase()||"AGENT"}),(0,t.jsx)("span",{className:"font-mono text-[8px] text-muted-foreground/30",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.hasFiles&&(0,t.jsx)("span",{className:"font-mono text-[8px] text-warning-amber/60 border border-warning-amber/20 px-1",children:"FILES"})]}),(0,t.jsx)("div",{className:(0,i.cn)("font-mono text-[12px] leading-relaxed whitespace-pre-wrap break-words","user"===e.role?"text-foreground/80":"text-foreground",e.text.startsWith("Error:")?"text-error-red":""),children:e.text})]},a))}),R&&(0,t.jsxs)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"py-4 border-t border-border/20",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,t.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest font-bold text-system-green",children:y?.name?.toUpperCase()||"AGENT"})}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 bg-system-green/60 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"h-1.5 w-1.5 bg-system-green/60 rounded-full animate-pulse [animation-delay:150ms]"}),(0,t.jsx)("span",{className:"h-1.5 w-1.5 bg-system-green/60 rounded-full animate-pulse [animation-delay:300ms]"}),(0,t.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground/40 ml-2",children:"Processing..."})]})]}),(0,t.jsx)("div",{ref:_})]})}),(0,t.jsx)("div",{className:"border-t border-border px-4 md:px-8 py-4 flex-shrink-0 bg-background",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[E.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:E.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-1.5 border border-border px-2 py-1 bg-muted-foreground/5",children:[(0,t.jsx)("span",{className:"font-mono text-[9px] text-foreground/70 truncate max-w-[120px]",children:e.name}),(0,t.jsx)("button",{onClick:()=>{T(e=>e.filter((e,t)=>t!==a))},className:"font-mono text-[9px] text-error-red hover:text-error-red/80",children:"x"})]},a))}),F&&(0,t.jsx)("div",{className:"border border-error-red/30 bg-error-red/5 px-3 py-2 mb-3",children:(0,t.jsx)("span",{className:"font-mono text-[10px] text-error-red",children:F})}),(0,t.jsxs)("div",{className:"flex items-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>L.current?.click(),disabled:!J,className:"font-mono text-xs px-3 py-2.5 border border-border hover:border-foreground/30 text-muted-foreground hover:text-foreground transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex-shrink-0",title:"Attach files",children:"+"}),(0,t.jsx)("input",{ref:L,type:"file",multiple:!0,onChange:function(e){let t=e.target.files;t&&(Array.from(t).forEach(e=>{let t=new FileReader;t.onload=()=>{let a=t.result.split(",")[1];T(t=>[...t,{name:e.name,data:a,mimeType:e.type||"application/octet-stream"}])},t.readAsDataURL(e)}),e.target.value="")},className:"hidden"}),(0,t.jsx)("div",{className:"flex-1 border border-border focus-within:border-foreground/30 transition-colors relative",children:(0,t.jsx)("textarea",{ref:G,value:I,onChange:function(e){C(e.target.value);let t=e.target;t.style.height="auto",t.style.height=Math.min(t.scrollHeight,160)+"px"},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Y())},disabled:!J,placeholder:J?"Type a message... (Shift+Enter for new line)":"Cannot send messages",rows:1,className:"w-full bg-transparent font-mono text-xs text-foreground placeholder:text-muted-foreground/30 px-4 py-3 resize-none outline-none disabled:opacity-30 disabled:cursor-not-allowed",style:{maxHeight:"160px"}})}),(0,t.jsx)("button",{onClick:Y,disabled:!J||!I.trim(),className:(0,i.cn)("font-mono text-xs uppercase tracking-widest px-6 py-2.5 transition-colors flex-shrink-0",J&&I.trim()?"bg-foreground text-background hover:opacity-90":"bg-muted-foreground/10 text-muted-foreground/30 cursor-not-allowed"),children:R?"...":"SEND"})]}),(0,t.jsxs)("div",{className:"sm:hidden mt-3 flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"font-mono text-[8px] uppercase tracking-wider text-muted-foreground/40",children:[X.toLocaleString()," / ",M.toLocaleString()," calls remaining"]}),(0,t.jsx)("div",{className:"w-20 h-1 bg-muted-foreground/10 overflow-hidden",children:(0,t.jsx)("div",{className:(0,i.cn)("h-full",q>90?"bg-error-red":q>70?"bg-warning-amber":"bg-system-green"),style:{width:`${q}%`}})})]})]})})]})}function x({agent:e,network:n,agentId:r}){let{walletAddress:s,signer:o}=(0,u.useWallet)(),[m,x]=(0,a.useState)(5),[f,g]=(0,a.useState)(""),[h,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),[j,k]=(0,a.useState)(!1),A=c.CONTRACTS[n];async function S(){if(s&&o&&r&&A){b(!0),N(null);try{let t=`I give feedback score ${m}/5 to agent #${r} (${e?.name||"agent"}) on ${A.name} via 8004agent.network`,a=await o.signMessage(t),n={network:A.facinetNetwork,chainId:A.chainId},i=await (0,l.selectFacilitator)(n),u=d.ethers.keccak256(d.ethers.toUtf8Bytes(a));await (0,l.facinetExecuteContract)(n,{contractAddress:A.reputationRegistry,functionName:"giveFeedback",functionArgs:[r,m,0,"rating",f||"",e?.url||"",`sig:${s}`,u],abi:c.REPUTATION_REGISTRY_ABI},i),v(!0)}catch(e){N(e instanceof Error?e.message:String(e))}finally{b(!1)}}}return((0,a.useEffect)(()=>{s&&r&&A&&e();async function e(){try{let e=new d.ethers.JsonRpcProvider(A.rpc),t=new d.ethers.Contract(A.reputationRegistry,c.REPUTATION_REGISTRY_ABI,e);Number(await t.getLastIndex(r,s))>0&&k(!0)}catch{}}},[s,r,A]),y)?(0,t.jsx)("div",{className:"border border-system-green/30 bg-system-green/5 p-4",children:(0,t.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-system-green",children:"Thank you for your feedback! It has been recorded on-chain."})}):j?(0,t.jsx)("div",{className:"border border-border/60 p-4 text-center",children:(0,t.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/50",children:"You have already submitted feedback for this agent"})}):(0,t.jsxs)("div",{className:"border border-border p-4 relative",children:[(0,t.jsx)(p,{opacity:10}),(0,t.jsxs)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-3",children:["How was your experience with ",e?.name||"this agent","?"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[[1,2,3,4,5].map(e=>(0,t.jsx)("button",{onClick:()=>x(e),className:(0,i.cn)("w-9 h-9 font-mono text-sm font-bold border transition-colors",e===m?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:e},e)),(0,t.jsx)("span",{className:"font-mono text-[9px] text-muted-foreground/40 ml-2",children:"/5"})]}),(0,t.jsx)("textarea",{value:f,onChange:e=>g(e.target.value),placeholder:"Optional comment...",rows:2,className:"w-full bg-transparent border border-border px-3 py-2 font-mono text-xs text-foreground placeholder:text-muted-foreground/30 focus:outline-none focus:border-foreground/40 transition-colors resize-none no-scrollbar mb-3"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:S,disabled:h,className:"font-mono text-[10px] uppercase tracking-widest bg-foreground text-background px-5 py-2 hover:opacity-90 disabled:opacity-30",children:h?"Submitting...":"Submit Feedback"}),(0,t.jsx)("span",{className:"font-mono text-[8px] text-muted-foreground/40 uppercase tracking-wider",children:"Gas covered by Facinet"})]}),w&&(0,t.jsx)("div",{className:"mt-2 border border-error-red/30 bg-error-red/5 px-3 py-1.5",children:(0,t.jsx)("span",{className:"font-mono text-[10px] text-error-red",children:w})})]})}function f(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 w-48 bg-muted-foreground/10 rounded"}),(0,t.jsx)("div",{className:"h-24 bg-muted-foreground/10 rounded"}),(0,t.jsx)("div",{className:"flex-1 h-64 bg-muted-foreground/10 rounded"})]})})}),children:(0,t.jsx)(m,{})})}e.s(["default",()=>f])}]);