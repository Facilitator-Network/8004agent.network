(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),n=e.i(31178),s=e.i(47414),o=e.i(74008),a=e.i(21476),l=e.i(72846),i=r,d=e.i(37806);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,l.isHTMLElement)(e)&&e.offsetWidth||0,n=(0,l.isHTMLElement)(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left,s.bottom=n-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:n,anchorX:s,anchorY:o,root:a,pop:l}){let x=(0,i.useId)(),m=(0,i.useRef)(null),p=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:g}=(0,i.useContext)(d.MotionConfigContext),f=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=c(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():c(e[t],null)}}}}(...e),e)}(m,e.props?.ref??e?.ref);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:i,right:d,bottom:c}=p.current;if(n||!1===l||!m.current||!e||!t)return;let u="left"===s?`left: ${i}`:`right: ${d}`,f="bottom"===o?`bottom: ${c}`:`top: ${r}`;m.current.dataset.motionPopId=x;let h=document.createElement("style");g&&(h.nonce=g);let b=a??document.head;return b.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${x}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${f}px !important;
          }
        `),()=>{b.contains(h)&&b.removeChild(h)}},[n]),(0,t.jsx)(u,{isPresent:n,childRef:m,sizeRef:p,pop:l,children:!1===l?e:i.cloneElement(e,{ref:f})})}let m=({children:e,initial:n,isPresent:o,onExitComplete:l,custom:i,presenceAffectsLayout:d,mode:c,anchorX:u,anchorY:m,root:g})=>{let f=(0,s.useConstant)(p),h=(0,r.useId)(),b=!0,j=(0,r.useMemo)(()=>(b=!1,{id:h,initial:n,isPresent:o,custom:i,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;l&&l()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[o,f,l]);return d&&b&&(j={...j}),(0,r.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[o]),r.useEffect(()=>{o||f.size||!l||l()},[o]),e=(0,t.jsx)(x,{pop:"popLayout"===c,isPresent:o,anchorX:u,anchorY:m,root:g,children:e}),(0,t.jsx)(a.PresenceContext.Provider,{value:j,children:e})};function p(){return new Map}var g=e.i(64978);let f=e=>e.key||"";function h(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:a,initial:l=!0,onExitComplete:i,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:x="left",anchorY:p="top",root:b})=>{let[j,v]=(0,g.usePresence)(u),N=(0,r.useMemo)(()=>h(e),[e]),w=u&&!j?[]:N.map(f),k=(0,r.useRef)(!0),y=(0,r.useRef)(N),E=(0,s.useConstant)(()=>new Map),C=(0,r.useRef)(new Set),[T,S]=(0,r.useState)(N),[A,I]=(0,r.useState)(N);(0,o.useIsomorphicLayoutEffect)(()=>{k.current=!1,y.current=N;for(let e=0;e<A.length;e++){let t=f(A[e]);w.includes(t)?(E.delete(t),C.current.delete(t)):!0!==E.get(t)&&E.set(t,!1)}},[A,w.length,w.join("-")]);let R=[];if(N!==T){let e=[...N];for(let t=0;t<A.length;t++){let r=A[t],n=f(r);w.includes(n)||(e.splice(t,0,r),R.push(r))}return"wait"===c&&R.length&&(e=R),I(h(e)),S(N),null}let{forceRender:P}=(0,r.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:A.map(e=>{let r=f(e),n=(!u||!!j)&&(N===A||w.includes(r));return(0,t.jsx)(m,{isPresent:n,initial:(!k.current||!!l)&&void 0,custom:a,presenceAffectsLayout:d,mode:c,root:b,onExitComplete:n?void 0:()=>{if(C.current.has(r)||(C.current.add(r),!E.has(r)))return;E.set(r,!0);let e=!0;E.forEach(t=>{t||(e=!1)}),e&&(P?.(),I(y.current),u&&v?.(),i&&i())},anchorX:x,anchorY:p,children:e},r)})})};e.s(["AnimatePresence",()=>b],88653)},99519,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(46932),s=e.i(88653),o=e.i(47163),a=e.i(37799),l=e.i(54238),i=e.i(43363),d=e.i(4319),c=e.i(54858);let u=[{id:0,label:"BASIC INFO"},{id:1,label:"ENDPOINTS"},{id:2,label:"SKILLS"},{id:3,label:"CONFIG"},{id:4,label:"REVIEW"},{id:5,label:"DEPLOY"},{id:6,label:"DONE"}],x=Object.keys(d.CONTRACTS).length;function m(){let[e,o]=(0,r.useState)(0),[l,i]=(0,r.useState)({...d.DEFAULT_FORM_DATA}),[c,u]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!1),[N,E]=(0,r.useState)(!1),{walletAddress:C,signer:A}=(0,a.useWallet)(),I=(0,r.useCallback)(e=>{i(t=>({...t,...e})),void 0!==e.name&&f(!1),void 0!==e.url&&b(!1)},[]),R=(0,r.useCallback)(()=>{switch(e){case 0:return""!==l.name.trim()&&l.url.trim().startsWith("http")&&""!==l.description.trim()&&!g&&!h&&!N;case 1:case 2:case 3:return!0;case 4:return!!C;default:return!1}},[e,l,C,g,h,N]);return(0,t.jsx)("div",{className:"h-full w-full relative flex flex-col overflow-y-auto no-scrollbar",children:(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center pt-24 pb-16 px-4 md:px-8",children:[e<6&&(0,t.jsx)(p,{currentStep:e}),(0,t.jsxs)("div",{className:"w-full max-w-2xl mt-8",children:[(0,t.jsx)(s.AnimatePresence,{mode:"wait",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.25},children:[0===e&&(0,t.jsx)(j,{form:l,updateForm:I,nameTaken:g,setNameTaken:f,urlTaken:h,setUrlTaken:b,checking:N,setChecking:E}),1===e&&(0,t.jsx)(v,{form:l,updateForm:I}),2===e&&(0,t.jsx)(w,{form:l,updateForm:I}),3===e&&(0,t.jsx)(k,{form:l,updateForm:I}),4===e&&(0,t.jsx)(y,{form:l,walletAddress:C}),5===e&&(0,t.jsx)(T,{form:l,walletAddress:C,signer:A,setResult:u,setError:m,onComplete:()=>o(6)}),6===e&&(0,t.jsx)(S,{result:c,error:x,form:l})]},e)}),e<5&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-border",children:[(0,t.jsx)("button",{onClick:()=>o(e=>Math.max(0,e-1)),disabled:0===e,className:"font-mono text-xs uppercase tracking-widest text-muted-foreground hover:text-foreground transition-colors disabled:opacity-30",children:"[BACK]"}),e<4?(0,t.jsx)("button",{onClick:()=>o(e=>e+1),disabled:!R(),className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-6 py-2.5 hover:opacity-90 transition-opacity disabled:opacity-30",children:"NEXT →"}):(0,t.jsx)("button",{onClick:()=>o(5),disabled:!C,className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-6 py-2.5 hover:opacity-90 transition-opacity disabled:opacity-30",children:"SIGN & DEPLOY"})]})]})]})})}function p({currentStep:e}){return(0,t.jsx)("div",{className:"flex items-center gap-1 md:gap-2 w-full max-w-2xl",children:u.slice(0,6).map(r=>(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:(0,o.cn)("w-full h-1 rounded-full transition-colors duration-300",r.id<=e?"bg-foreground":"bg-border")}),(0,t.jsx)("span",{className:(0,o.cn)("font-mono text-[9px] tracking-widest uppercase transition-colors duration-300 hidden md:block",r.id===e?"text-foreground":"text-muted-foreground/50"),children:r.label})]},r.id))})}function g({children:e}){return(0,t.jsx)("label",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground mb-1.5 block",children:e})}function f({value:e,onChange:r,placeholder:n,required:s,error:a}){return(0,t.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:n,required:s,className:(0,o.cn)("w-full bg-transparent border px-4 py-2.5 font-mono text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none transition-colors",a?"border-error-red focus:border-error-red":"border-border focus:border-foreground/40")})}function h({value:e,onChange:r,placeholder:n,rows:s=3}){return(0,t.jsx)("textarea",{value:e,onChange:e=>r(e.target.value),placeholder:n,rows:s,className:"w-full bg-transparent border border-border px-4 py-2.5 font-mono text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-foreground/40 transition-colors resize-none no-scrollbar"})}function b({step:e,title:r}){return(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("span",{className:"font-mono text-[10px] text-muted-foreground/60 uppercase tracking-widest",children:e}),(0,t.jsx)("h2",{className:"font-mono text-2xl md:text-3xl font-bold tracking-tight uppercase text-foreground mt-1",children:r})]})}function j({form:e,updateForm:n,nameTaken:s,setNameTaken:o,urlTaken:a,setUrlTaken:l,checking:i,setChecking:d}){let u=(0,r.useRef)(null),x=(0,r.useRef)(null),m=(0,r.useCallback)(e=>{(u.current&&clearTimeout(u.current),e.trim())?(d(!0),u.current=setTimeout(async()=>{try{let t=await (0,c.apiCheckAgent)(e.trim(),void 0);o(t.nameTaken)}catch{}d(!1)},500)):o(!1)},[o,d]),p=(0,r.useCallback)(e=>{(x.current&&clearTimeout(x.current),e.trim())?(d(!0),x.current=setTimeout(async()=>{try{let t=await (0,c.apiCheckAgent)(void 0,e.trim());l(t.urlTaken)}catch{}d(!1)},500)):l(!1)},[l,d]);return(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)(b,{step:"Step 01",title:"Basic Information"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Agent Name *"}),(0,t.jsx)(f,{value:e.name,onChange:e=>{n({name:e}),m(e)},placeholder:"My AI Agent",required:!0,error:s}),s&&(0,t.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-wider text-error-red mt-1 block",children:"This name is already taken — an agent with this name is already live"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Agent URL *"}),(0,t.jsx)(f,{value:e.url,onChange:e=>{n({url:e}),p(e)},placeholder:"https://my-agent.vercel.app",required:!0,error:a}),a&&(0,t.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-wider text-error-red mt-1 block",children:"This URL is already registered — an agent at this URL is already live"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Image URL (optional)"}),(0,t.jsx)(f,{value:e.imageUrl,onChange:e=>n({imageUrl:e}),placeholder:"https://..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Description *"}),(0,t.jsx)(h,{value:e.description,onChange:e=>n({description:e}),placeholder:"What does your agent do?"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Version"}),(0,t.jsx)(f,{value:e.version,onChange:e=>n({version:e}),placeholder:"1.0.0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Author"}),(0,t.jsx)(f,{value:e.author,onChange:e=>n({author:e}),placeholder:"Name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"License"}),(0,t.jsx)(f,{value:e.license,onChange:e=>n({license:e}),placeholder:"MIT"})]})]})]})}function v({form:e,updateForm:r}){return(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)(b,{step:"Step 02",title:"Endpoints"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground -mt-3",children:"Optional protocol endpoints for your agent."}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"MCP Endpoint URL"}),(0,t.jsx)(f,{value:e.mcpEndpoint,onChange:e=>r({mcpEndpoint:e}),placeholder:"https://my-agent.com/mcp"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"A2A Endpoint URL"}),(0,t.jsx)(f,{value:e.a2aEndpoint,onChange:e=>r({a2aEndpoint:e}),placeholder:"https://my-agent.com/a2a"})]})]})}function N({label:e,items:r,selected:n,onChange:s}){return(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:e}),(0,t.jsx)("div",{className:"border border-border p-4 max-h-56 overflow-y-auto no-scrollbar flex flex-col gap-3",children:Object.entries(r).map(([e,r])=>(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-mono text-[9px] uppercase tracking-widest text-muted-foreground/60 mb-1 block",children:e}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{s(n.includes(e)?n.filter(t=>t!==e):[...n,e])},className:(0,o.cn)("font-mono text-[10px] uppercase tracking-wider px-3 py-1.5 border transition-colors",n.includes(e)?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30 hover:text-foreground"),children:e},e))})]},e))})]})}function w({form:e,updateForm:r}){return(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)(b,{step:"Step 03",title:"Skills & Domains"}),(0,t.jsx)(N,{label:"OASF Skills",items:d.OASF_SKILLS,selected:e.skills,onChange:e=>r({skills:e})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Custom Skills (comma-separated)"}),(0,t.jsx)(f,{value:e.customSkills,onChange:e=>r({customSkills:e}),placeholder:"Custom Skill 1, Custom Skill 2"})]}),(0,t.jsx)(N,{label:"Application Domains",items:d.APPLICATION_DOMAINS,selected:e.domains,onChange:e=>r({domains:e})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Custom Domains (comma-separated)"}),(0,t.jsx)(f,{value:e.customDomains,onChange:e=>r({customDomains:e}),placeholder:"Custom Domain 1, Custom Domain 2"})]})]})}function k({form:e,updateForm:r}){return(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)(b,{step:"Step 04",title:"Advanced Configuration"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Metadata Storage"}),(0,t.jsx)("div",{className:"flex gap-3",children:["on-chain","ipfs"].map(n=>(0,t.jsx)("button",{type:"button",onClick:()=>r({metadataStorage:n}),className:(0,o.cn)("flex-1 font-mono text-xs uppercase tracking-wider px-4 py-3 border transition-colors text-center",e.metadataStorage===n?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30"),children:"on-chain"===n?"ON-CHAIN (PERMANENT)":"IPFS (UPDATEABLE)"},n))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Trust Models (optional)"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.TRUST_MODELS.map(n=>(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=n.value,void r({trustModels:e.trustModels.includes(t)?e.trustModels.filter(e=>e!==t):[...e.trustModels,t]})},className:(0,o.cn)("font-mono text-[10px] uppercase tracking-wider px-3 py-1.5 border transition-colors",e.trustModels.includes(n.value)?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30"),children:n.name},n.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"X402 Payment Support"}),(0,t.jsx)("button",{type:"button",onClick:()=>r({x402Payment:!e.x402Payment}),className:(0,o.cn)("font-mono text-xs uppercase tracking-wider px-4 py-2.5 border transition-colors",e.x402Payment?"border-foreground bg-foreground text-background":"border-border text-muted-foreground"),children:e.x402Payment?"ENABLED":"DISABLED"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Activation Status"}),(0,t.jsx)("div",{className:"flex gap-3",children:["active","inactive"].map(n=>(0,t.jsx)("button",{type:"button",onClick:()=>r({activationStatus:n}),className:(0,o.cn)("flex-1 font-mono text-xs uppercase tracking-wider px-4 py-2.5 border transition-colors text-center",e.activationStatus===n?"border-foreground bg-foreground text-background":"border-border text-muted-foreground hover:border-foreground/30"),children:n},n))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(g,{children:"Hire Price (USDC, 0 = free)"}),(0,t.jsx)(f,{value:e.hirePrice,onChange:e=>{(""===e||/^\d*\.?\d*$/.test(e))&&r({hirePrice:e})},placeholder:"0"})]})]})}function y({form:e,walletAddress:r}){let n=[...e.skills,...e.customSkills.split(",").map(e=>e.trim()).filter(Boolean)],s=[...e.domains,...e.customDomains.split(",").map(e=>e.trim()).filter(Boolean)],o=parseFloat(e.hirePrice||"0"),a=Object.values(d.CONTRACTS).map(e=>e.name).join(", ");return(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)(b,{step:"Step 05",title:"Review & Deploy"}),r?(0,t.jsxs)("div",{className:"border border-system-green/40 bg-system-green/5 px-4 py-3 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-system-green"}),(0,t.jsxs)("span",{className:"font-mono text-xs uppercase tracking-wider text-system-green",children:["Owner: ",r]})]}):(0,t.jsx)("div",{className:"border border-warning-amber/40 bg-warning-amber/5 px-4 py-3",children:(0,t.jsx)("span",{className:"font-mono text-xs uppercase tracking-wider text-warning-amber",children:"Connect wallet from navbar to proceed"})}),(0,t.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,t.jsx)("div",{className:"absolute top-2 left-2 w-3 h-3 border-t border-l border-foreground/20"}),(0,t.jsx)("div",{className:"absolute top-2 right-2 w-3 h-3 border-t border-r border-foreground/20"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-b border-l border-foreground/20"}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-b border-r border-foreground/20"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm font-mono",children:[(0,t.jsx)(E,{label:"NAME",value:e.name}),(0,t.jsx)(E,{label:"URL",value:e.url}),e.imageUrl&&(0,t.jsx)(E,{label:"IMAGE",value:e.imageUrl}),(0,t.jsx)(E,{label:"DESCRIPTION",value:e.description}),(0,t.jsx)(E,{label:"VERSION",value:e.version}),e.author&&(0,t.jsx)(E,{label:"AUTHOR",value:e.author}),(0,t.jsx)(E,{label:"LICENSE",value:e.license}),e.mcpEndpoint&&(0,t.jsx)(E,{label:"MCP",value:e.mcpEndpoint}),e.a2aEndpoint&&(0,t.jsx)(E,{label:"A2A",value:e.a2aEndpoint}),n.length>0&&(0,t.jsx)(E,{label:"SKILLS",value:n.join(", ")}),s.length>0&&(0,t.jsx)(E,{label:"DOMAINS",value:s.join(", ")}),(0,t.jsx)(E,{label:"METADATA",value:e.metadataStorage.toUpperCase()}),e.trustModels.length>0&&(0,t.jsx)(E,{label:"TRUST",value:e.trustModels.join(", ")}),(0,t.jsx)(E,{label:"X402",value:e.x402Payment?"ENABLED":"DISABLED"}),(0,t.jsx)(E,{label:"STATUS",value:e.activationStatus.toUpperCase()}),(0,t.jsx)(E,{label:"HIRE PRICE",value:o>0?`$${o.toFixed(2)} USDC`:"FREE"})]})]}),(0,t.jsxs)("div",{className:"border border-border bg-muted/5 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground",children:"Cost"}),(0,t.jsx)("span",{className:"font-mono text-lg font-bold text-system-green",children:"FREE"})]}),(0,t.jsxs)("p",{className:"font-mono text-[10px] text-muted-foreground/60 mt-2 uppercase tracking-wider",children:["You will sign a message to prove ownership. All gas fees are covered by Facinet facilitators. Agent will be registered on ",x," networks: ",a,"."]})]})]})}function E({label:e,value:r}){return(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground/60 w-24 shrink-0 pt-0.5",children:e}),(0,t.jsx)("span",{className:"text-xs text-foreground break-all",children:r})]})}async function C(e,t){let r=new l.ethers.JsonRpcProvider(t),n=await r.waitForTransaction(e,1,6e4);if(!n)return null;let s=new l.ethers.Interface(d.IDENTITY_REGISTRY_ABI);for(let e of n.logs)try{let t=s.parseLog({topics:e.topics,data:e.data});if(t?.name==="Registered")return t.args.agentId.toString()}catch{}return null}function T({form:e,walletAddress:n,signer:s,setResult:a,setError:l,onComplete:u}){let[x,m]=(0,r.useState)([]),p=(0,r.useRef)(!1),g=(0,r.useCallback)((e,t="running")=>{m(r=>[...r,{message:e,status:t}])},[]),f=(0,r.useCallback)((e,t)=>{m(r=>{let n=[...r];return n.length>0&&(n[n.length-1]={...n[n.length-1],status:e,...t?{message:t}:{}}),n})},[]);async function h(){let t={agentWalletAddress:null,circleWalletId:null,networkResults:[]};try{if(!s)throw Error("Wallet not connected");g("Requesting ownership signature...");let r=Math.floor(Date.now()/1e3),o=`I am registering agent "${e.name}" at ${e.url} as owner ${n} on 8004agent.network

Timestamp: ${r}`;await s.signMessage(o),f("done","Ownership verified!"),g("Creating Circle Agent Wallet...");try{let e=await (0,c.apiCreateCircleWallet)("pending");t.agentWalletAddress=e.address||null,t.circleWalletId=e.walletId||null,f("done",`Wallet: ${e.address?.slice(0,10)}...`)}catch(t){let e=t instanceof Error?t.message:String(t);f("error",`Wallet skipped: ${e}`)}let l=[...e.skills,...e.customSkills.split(",").map(e=>e.trim()).filter(Boolean)],x=[...e.domains,...e.customDomains.split(",").map(e=>e.trim()).filter(Boolean)];for(let r of Object.keys(d.CONTRACTS)){let s=d.CONTRACTS[r],o={network:s.name,networkKey:r,agentId:null,registrationTx:null,transferTx:null,blockExplorer:s.blockExplorer};try{let a={network:s.facinetNetwork,chainId:s.chainId};g(`Selecting facilitator on ${s.name}...`);let u=await (0,i.selectFacilitator)(a);f("done",`${s.name}: Using ${u.name}`),g(`Registering on ${s.name} via Facinet...`);let m=await (0,i.facinetExecuteContract)(a,{contractAddress:s.identityRegistry,functionName:"register",functionArgs:[e.url],abi:d.IDENTITY_REGISTRY_ABI},u);o.registrationTx=m.txHash,f("done",`${s.name}: Tx ${m.txHash.slice(0,14)}...`),g(`Parsing agent ID on ${s.name}...`);try{let e=await C(m.txHash,s.rpc);o.agentId=e,e?f("done",`${s.name}: Agent #${e}`):f("done",`${s.name}: Registered (ID pending)`)}catch{f("done",`${s.name}: Registered (ID will resolve)`)}if(o.agentId){g(`Transferring NFT #${o.agentId} to owner on ${s.name}...`);try{let e=await (0,i.facinetExecuteContract)(a,{contractAddress:s.identityRegistry,functionName:"transferFrom",functionArgs:[u.wallet,n,o.agentId],abi:d.IDENTITY_REGISTRY_ABI},u);o.transferTx=e.txHash,f("done",`NFT transferred on ${s.name}`)}catch(t){let e=t instanceof Error?t.message:String(t);f("error",`NFT transfer pending: ${e}`)}}try{await (0,c.apiStoreAgent)({agentId:o.agentId||"pending",name:e.name,url:e.url,imageUrl:e.imageUrl||"",description:e.description,version:e.version,author:e.author,license:e.license,mcpEndpoint:e.mcpEndpoint||"",a2aEndpoint:e.a2aEndpoint||"",skills:l,domains:x,metadataStorage:e.metadataStorage,trustModels:e.trustModels,x402Payment:e.x402Payment,status:e.activationStatus,hirePrice:e.hirePrice,network:r,ownerAddress:n,registrationTx:o.registrationTx||"",registeredAt:new Date().toISOString(),agentWalletAddress:t.agentWalletAddress||"",circleWalletId:t.circleWalletId||""})}catch{}}catch(t){let e=t instanceof Error?t.message:String(t);f("error",`${s.name} failed: ${e}`)}t.networkResults.push(o)}g("Registration complete!"),f("done"),a(t),setTimeout(()=>u(),1500)}catch(r){let e=r instanceof Error?r.message:String(r);f("error",e),l(e),a(t),setTimeout(()=>u(),2e3)}}return(0,r.useEffect)(()=>{p.current||(p.current=!0,h())},[]),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(b,{step:"Step 06",title:"Deploying..."}),(0,t.jsxs)("div",{className:"border border-border p-5 relative min-h-[300px]",children:[(0,t.jsx)("div",{className:"absolute top-2 left-2 w-3 h-3 border-t border-l border-foreground/20"}),(0,t.jsx)("div",{className:"absolute top-2 right-2 w-3 h-3 border-t border-r border-foreground/20"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-b border-l border-foreground/20"}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-b border-r border-foreground/20"}),(0,t.jsxs)("div",{className:"space-y-2 font-mono text-xs",children:[x.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:(0,o.cn)("shrink-0 mt-0.5","running"===e.status&&"text-info-blue animate-pulse","done"===e.status&&"text-system-green","error"===e.status&&"text-error-red","pending"===e.status&&"text-muted-foreground/40"),children:"running"===e.status?">":"done"===e.status?"+":"error"===e.status?"x":"-"}),(0,t.jsx)("span",{className:(0,o.cn)("break-all","error"===e.status&&"text-error-red","done"===e.status&&"text-foreground/80","running"===e.status&&"text-foreground","pending"===e.status&&"text-muted-foreground/40"),children:e.message})]},r)),x.length>0&&"running"===x[x.length-1].status&&(0,t.jsx)("span",{className:"text-muted-foreground/40 animate-pulse",children:"_"})]})]})]})}function S({result:e,error:r,form:n}){if(!e)return null;let s=e.networkResults.some(e=>null!==e.registrationTx);return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"font-mono text-3xl md:text-4xl font-bold tracking-tight uppercase text-foreground",children:s?"DEPLOYMENT COMPLETE":"DEPLOYMENT FAILED"}),r&&!s&&(0,t.jsx)("p",{className:"font-mono text-xs text-error-red mt-2 uppercase tracking-wider",children:r})]}),s&&(0,t.jsxs)("div",{className:"border border-border p-5 relative",children:[(0,t.jsx)("div",{className:"absolute top-2 left-2 w-3 h-3 border-t border-l border-foreground/20"}),(0,t.jsx)("div",{className:"absolute top-2 right-2 w-3 h-3 border-t border-r border-foreground/20"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-b border-l border-foreground/20"}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-b border-r border-foreground/20"}),(0,t.jsxs)("div",{className:"space-y-2 font-mono text-sm",children:[(0,t.jsx)(E,{label:"NAME",value:n.name}),(0,t.jsx)(E,{label:"URL",value:n.url}),e.agentWalletAddress&&(0,t.jsx)(E,{label:"WALLET",value:e.agentWalletAddress}),e.circleWalletId&&(0,t.jsx)(E,{label:"CIRCLE ID",value:e.circleWalletId})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.networkResults.map((e,r)=>(0,t.jsxs)("div",{className:"border border-border p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:(0,o.cn)("h-2 w-2 rounded-full",e.registrationTx?"bg-system-green":"bg-error-red")}),(0,t.jsx)("span",{className:"font-mono text-xs font-bold uppercase tracking-widest text-foreground",children:e.network})]}),(0,t.jsxs)("div",{className:"space-y-1 font-mono text-xs",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground/60 w-20 shrink-0",children:"AGENT ID"}),(0,t.jsx)("span",{className:"text-foreground",children:e.agentId||"Pending"})]}),e.registrationTx&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground/60 w-20 shrink-0",children:"REG TX"}),(0,t.jsx)("a",{href:`${e.blockExplorer}/tx/${e.registrationTx}`,target:"_blank",rel:"noopener noreferrer",className:"text-info-blue hover:underline break-all",children:e.registrationTx})]}),e.transferTx&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground/60 w-20 shrink-0",children:"XFER TX"}),(0,t.jsx)("a",{href:`${e.blockExplorer}/tx/${e.transferTx}`,target:"_blank",rel:"noopener noreferrer",className:"text-info-blue hover:underline break-all",children:e.transferTx})]})]})]},r))}),e.agentWalletAddress&&(0,t.jsxs)("div",{className:"border border-border bg-muted/5 p-4",children:[(0,t.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-muted-foreground/60 block mb-2",children:"Agent Wallet (Circle Managed)"}),(0,t.jsx)("p",{className:"font-mono text-xs text-muted-foreground",children:"This wallet works on all EVM networks. Private key is securely managed by Circle. Hire payments will be sent to this address."})]}),(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"font-mono text-xs uppercase tracking-widest bg-foreground text-background px-8 py-3 hover:opacity-90 transition-opacity",children:"DEPLOY ANOTHER AGENT"})})]})}e.s(["default",()=>m])}]);